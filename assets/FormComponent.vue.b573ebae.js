var _____WB$wombat$assign$function_____ = function(name) {return (self._wb_wombat && self._wb_wombat.local_init && self._wb_wombat.local_init(name)) || self[name]; };
if (!self.__WB_pmw) { self.__WB_pmw = function(obj) { this.__WB_source = obj; return this; } }
{
  let window = _____WB$wombat$assign$function_____("window");
  let self = _____WB$wombat$assign$function_____("self");
  let document = _____WB$wombat$assign$function_____("document");
  let location = _____WB$wombat$assign$function_____("location");
  let top = _____WB$wombat$assign$function_____("top");
  let parent = _____WB$wombat$assign$function_____("parent");
  let frames = _____WB$wombat$assign$function_____("frames");
  let opener = _____WB$wombat$assign$function_____("opener");

import{A as _e,d as Ma,I as qa,E as Wa,r as p,M as Ha,G as Ga,c as ve,u as Ka,o as Ja,x as Rt,J as $t,ac as Qa,g as Ya,a as h,b as rt,l as yo,f as a,e as at,m as nt,i as Ee,n as Ct,F as Za,k as Xa,h as E,T as en,q as x,P as tn,j as on,s as R}from"./entry.285a7035.js";import{S as rn}from"./components.bbccb0fd.js";import{_ as an}from"./TextElement.vue.0a6d09ba.js";import{_ as nn}from"./TextBoxListElement.vue.0f438114.js";import{_ as ln}from"./TextAreaElement.vue.4ad5cfb9.js";import{_ as sn}from"./HtmlInput.vue.53d3c79f.js";import{_ as un}from"./OptionElement.vue.ed1f89bc.js";/* empty css                            */import{b as Ur,u as dn,_ as cn}from"./authorizeNet.9cb56f85.js";import{u as mn,f as It,v as fr,b as vo,i as fn,d as pn,e as yn,h as vn}from"./index.48cf4353.js";/* empty css            */import{an as _n,ao as pr,ap as Nr,H as gn,al as hn,ak as bn,T as Io,j as lt,u as Cn,E as _o,a2 as go,J as In,W as ho,a7 as yr,aq as Fn,V as Sn,a5 as En,U as wn,ab as vr,ac as Pn,ad as kn,af as _r,w as Bt,ae as gr,ag as hr,z as jt,I as br,ah as Cr,a8 as M,ar as Ft,a9 as Ir,aa as Tn,ai as On,S as bo,as as Co,at as An}from"./constants.7efca516.js";import{i as Vn,f as Fr}from"./funnel_event_helper.640aa911.js";import{l as Dn,a as Ln,L as zn,C as Mt}from"./advancedFormat.c1cbe87f.js";import{a as Un}from"./currency_helper.0e2fcc1c.js";import{_ as Nn}from"./MoonLoader.vue.48509ae3.js";import{o as xn,q as Sr,r as Rn,g as Er,t as $n}from"./calendar_helper.3c24cf7d.js";import{e as Bn,g as xr,s as jn,a as Mn,b as qn,U as wr,c as Fo,S as Wn,d as Hn}from"./_Uint8Array.08cacfb7.js";import{c as Rr,i as Gn,d as Kn,o as Jn,k as $r,n as Wt,b as Br,e as Qn}from"./keys.0d9c5e52.js";import{i as So}from"./isObject.32699ff3.js";var Pr=Object.create,Yn=function(){function t(){}return function(s){if(!So(s))return{};if(Pr)return Pr(s);t.prototype=s;var f=new t;return t.prototype=void 0,f}}();const Zn=Yn;function Xn(t,s){var f=-1,P=t.length;for(s||(s=Array(P));++f<P;)s[f]=t[f];return s}var el=Object.prototype,tl=el.hasOwnProperty;function jr(t,s,f){var P=t[s];(!(tl.call(t,s)&&Bn(P,f))||f===void 0&&!(s in t))&&Ur(t,s,f)}function Ht(t,s,f,P){var r=!f;f||(f={});for(var K=-1,k=s.length;++K<k;){var F=s[K],de=P?P(f[F],t[F],F,f,t):void 0;de===void 0&&(de=t[F]),r?Ur(f,F,de):jr(f,F,de)}return f}function ol(t){var s=[];if(t!=null)for(var f in Object(t))s.push(f);return s}var rl=Object.prototype,al=rl.hasOwnProperty;function nl(t){if(!So(t))return ol(t);var s=Rr(t),f=[];for(var P in t)P=="constructor"&&(s||!al.call(t,P))||f.push(P);return f}function Eo(t){return Gn(t)?Kn(t,!0):nl(t)}var ll=Jn(Object.getPrototypeOf,Object);const Mr=ll;function il(t,s){return t&&Ht(s,$r(s),t)}function sl(t,s){return t&&Ht(s,Eo(s),t)}var qr=typeof exports=="object"&&exports&&!exports.nodeType&&exports,kr=qr&&typeof module=="object"&&module&&!module.nodeType&&module,ul=kr&&kr.exports===qr,Tr=ul?_n.Buffer:void 0,Or=Tr?Tr.allocUnsafe:void 0;function dl(t,s){if(s)return t.slice();var f=t.length,P=Or?Or(f):new t.constructor(f);return t.copy(P),P}function cl(t,s){return Ht(t,xr(t),s)}var ml=Object.getOwnPropertySymbols,fl=ml?function(t){for(var s=[];t;)Mn(s,xr(t)),t=Mr(t);return s}:jn;const Wr=fl;function pl(t,s){return Ht(t,Wr(t),s)}function yl(t){return qn(t,Eo,Wr)}var vl=Object.prototype,_l=vl.hasOwnProperty;function gl(t){var s=t.length,f=new t.constructor(s);return s&&typeof t[0]=="string"&&_l.call(t,"index")&&(f.index=t.index,f.input=t.input),f}function wo(t){var s=new t.constructor(t.byteLength);return new wr(s).set(new wr(t)),s}function hl(t,s){var f=s?wo(t.buffer):t.buffer;return new t.constructor(f,t.byteOffset,t.byteLength)}var bl=/\w*$/;function Cl(t){var s=new t.constructor(t.source,bl.exec(t));return s.lastIndex=t.lastIndex,s}var Ar=pr?pr.prototype:void 0,Vr=Ar?Ar.valueOf:void 0;function Il(t){return Vr?Object(Vr.call(t)):{}}function Fl(t,s){var f=s?wo(t.buffer):t.buffer;return new t.constructor(f,t.byteOffset,t.length)}var Sl="[object Boolean]",El="[object Date]",wl="[object Map]",Pl="[object Number]",kl="[object RegExp]",Tl="[object Set]",Ol="[object String]",Al="[object Symbol]",Vl="[object ArrayBuffer]",Dl="[object DataView]",Ll="[object Float32Array]",zl="[object Float64Array]",Ul="[object Int8Array]",Nl="[object Int16Array]",xl="[object Int32Array]",Rl="[object Uint8Array]",$l="[object Uint8ClampedArray]",Bl="[object Uint16Array]",jl="[object Uint32Array]";function Ml(t,s,f){var P=t.constructor;switch(s){case Vl:return wo(t);case Sl:case El:return new P(+t);case Dl:return hl(t,f);case Ll:case zl:case Ul:case Nl:case xl:case Rl:case $l:case Bl:case jl:return Fl(t,f);case wl:return new P;case Pl:case Ol:return new P(t);case kl:return Cl(t);case Tl:return new P;case Al:return Il(t)}}function ql(t){return typeof t.constructor=="function"&&!Rr(t)?Zn(Mr(t)):{}}var Wl="[object Map]";function Hl(t){return Nr(t)&&Fo(t)==Wl}var Dr=Wt&&Wt.isMap,Gl=Dr?Br(Dr):Hl;const Kl=Gl;var Jl="[object Set]";function Ql(t){return Nr(t)&&Fo(t)==Jl}var Lr=Wt&&Wt.isSet,Yl=Lr?Br(Lr):Ql;const Zl=Yl;var Xl=1,ei=2,ti=4,Hr="[object Arguments]",oi="[object Array]",ri="[object Boolean]",ai="[object Date]",ni="[object Error]",Gr="[object Function]",li="[object GeneratorFunction]",ii="[object Map]",si="[object Number]",Kr="[object Object]",ui="[object RegExp]",di="[object Set]",ci="[object String]",mi="[object Symbol]",fi="[object WeakMap]",pi="[object ArrayBuffer]",yi="[object DataView]",vi="[object Float32Array]",_i="[object Float64Array]",gi="[object Int8Array]",hi="[object Int16Array]",bi="[object Int32Array]",Ci="[object Uint8Array]",Ii="[object Uint8ClampedArray]",Fi="[object Uint16Array]",Si="[object Uint32Array]",N={};N[Hr]=N[oi]=N[pi]=N[yi]=N[ri]=N[ai]=N[vi]=N[_i]=N[gi]=N[hi]=N[bi]=N[ii]=N[si]=N[Kr]=N[ui]=N[di]=N[ci]=N[mi]=N[Ci]=N[Ii]=N[Fi]=N[Si]=!0;N[ni]=N[Gr]=N[fi]=!1;function qt(t,s,f,P,r,K){var k,F=s&Xl,de=s&ei,Je=s&ti;if(f&&(k=r?f(t,P,r,K):f(t)),k!==void 0)return k;if(!So(t))return t;var Qe=gn(t);if(Qe){if(k=gl(t),!F)return Xn(t,k)}else{var ge=Fo(t),We=ge==Gr||ge==li;if(Qn(t))return dl(t,F);if(ge==Kr||ge==Hr||We&&!r){if(k=de||We?{}:ql(t),!F)return de?pl(t,sl(k,t)):cl(t,il(k,t))}else{if(!N[ge])return r?t:{};k=Ml(t,ge,F)}}K||(K=new Wn);var He=K.get(t);if(He)return He;K.set(t,k),Zl(t)?t.forEach(function($){k.add(qt($,s,f,$,t,K))}):Kl(t)&&t.forEach(function($,fe){k.set(fe,qt($,s,f,fe,t,K))});var _=Je?de?yl:Hn:de?Eo:$r,Ge=Qe?void 0:_(t);return xn(Ge||t,function($,fe){Ge&&(fe=$,$=t[fe]),jr(k,fe,qt($,s,f,fe,t,K))}),k}var Ei=1,wi=4;function zr(t){return qt(t,Ei|wi)}const Pi=(t,s,f)=>{switch(t){case"isEqualTo":return s==f;case"isNotEqualTo":return s!=f;case"contains":return s==null?void 0:s.includes(f);case"startsWith":return s==null?void 0:s.startsWith(f);case"endsWith":return s==null?void 0:s.endsWith(f);case"isEmpty":return!s;case"isFilled":return s;case"before":return new Date(s)<new Date(f);case"after":return new Date(s)>new Date(f);case"greaterThan":return parseFloat(s)>parseFloat(f);case"lessThan":return parseFloat(s)<parseFloat(f);default:return console.warn(`Unknown selected operation: ${t}`),!1}},Es=async(t,s,f,P,r,K,k,F,de,Je,Qe,ge)=>{var We,He,_,Ge;try{let $=localStorage.getItem("_ud");$&&($=JSON.parse($));const fe=_e("am_id").value,St=_e("am_fingerprint").value,it=k.funnelName||"funnel",{funnelPageId:q,funnelId:Gt,stepId:Et}=k;s||(s=window.location.hostname,f=window.location.pathname);const wt={altId:P,altType:"location",contactId:t,source:{type:hn.FORM,id:r,name:K,meta:{funnelId:Gt,funnelName:it,stepId:Et,pageId:q,domain:s,pageUrl:f,affiliateManager:{id:fe,fingerprint:St}}},products:F.map(V=>({id:V.id,qty:V.qty})),fingerprint:de,couponSessionId:Qe,couponCode:ge,trackingId:bn(),traceId:$==null?void 0:$.traceId};Je&&(wt.captchaToken=Je);const Pt=await Io.createOrder(wt);if(!((We=Pt.order)==null?void 0:We._id))throw new Error("Something went wrong while creating order. Please try again later.");return Pt}catch($){return console.error($),{error:!0,message:(_=(He=$==null?void 0:$.response)==null?void 0:He._data)==null?void 0:_.message,status:(Ge=$==null?void 0:$.response)==null?void 0:Ge.status}}},ws=async(t,s,f,P)=>{try{const r={altId:t,altType:"location",source:{type:"form",id:s},products:f.map(k=>({id:k.id,qty:k.qty})),couponCode:P};return await Io.getAmountSummary(r)}catch{throw new Error("Something went wrong while creating order. Please try again later.")}},Ps=t=>{let s=t.price*t.qty;return t.trialPeriod&&(s=0),s+(t.setupFee??0)};var we=(t=>(t.PRODUCT="product",t.DONATION="donation",t))(we||{});const ki=x(()=>R(()=>import("./HLImage.adb2fddd.js"),[],import.meta.url).then(t=>t.default||t)),Ti=x(()=>R(()=>import("./PhoneElement.95f946eb.js"),["./TextElement.0b941f97.css"],import.meta.url).then(t=>t.default||t)),Oi=x(()=>R(()=>import("./NumberElement.1d6d329f.js"),["./TextBoxListElement.b602ad61.css"],import.meta.url).then(t=>t.default||t)),Ai=x(()=>R(()=>import("./EmailElement.4dbee81e.js"),["./EmailElement.029bb7ff.css"],import.meta.url).then(t=>t.default||t)),Vi=x(()=>R(()=>import("./HeadingElement.bfde26f4.js"),[],import.meta.url).then(t=>t.default||t)),Di=x(()=>R(()=>import("./MutlipleMeetingPicker.9db34f73.js"),["./MutlipleMeetingPicker.857f4783.css"],import.meta.url).then(t=>t.default||t)),Li=x(()=>R(()=>import("./ImageElement.a3f52e81.js"),[],import.meta.url).then(t=>t.default||t)),zi=x(()=>R(()=>import("./CaptchaElement.e1aee735.js"),["./CaptchaElement.82e40e45.css"],import.meta.url).then(t=>t.default||t)),Ui=x(()=>R(()=>import("./MonetaryElement.3f9192a2.js"),["./TextBoxListElement.b602ad61.css"],import.meta.url).then(t=>t.default||t)),Ni=x(()=>R(()=>import("./CheckBoxElement.c45b430f.js"),["./CheckBoxElement.cbef37c2.css"],import.meta.url).then(t=>t.default||t)),xi=x(()=>R(()=>import("./TermsAndConditionsElement.1b85dc6c.js"),["./TermsAndConditionsElement.f4c1fd12.css"],import.meta.url).then(t=>t.default||t)),Ri=x(()=>R(()=>import("./RadioOptionElement.94aa51c4.js"),["./RadioOptionElement.801ff641.css"],import.meta.url).then(t=>t.default||t)),$i=x(()=>R(()=>import("./RadioImageOptionElement.baa91ad1.js"),["./TextBoxListElement.b602ad61.css"],import.meta.url).then(t=>t.default||t)),Bi=x(()=>R(()=>import("./CountryOptionElement.79e6d794.js"),["./vue-multiselect.eb3eab67.css"],import.meta.url).then(t=>t.default||t)),ji=x(()=>R(()=>import("./DateElement.2775f2d6.js"),["./DatePick.6beced99.css","./DateElement.e9cd5c5f.css"],import.meta.url).then(t=>t.default||t)),Mi=x(()=>R(()=>import("./StripePaymentElement.ced1ed20.js"),[],import.meta.url).then(t=>t.default||t)),qi=x(()=>R(()=>import("./AuthorizeNetPaymentElement.3bf5d8e5.js"),["./AuthorizeNetPaymentElement.5c161814.css"],import.meta.url).then(t=>t.default||t)),Wi=x(()=>R(()=>import("./FormSurveyPayment.f146d4d6.js"),["./ghl-payment-element.7c35df0b.css","./TextElement.0b941f97.css","./TextBoxListElement.b602ad61.css","./OptionElement.05aaf420.css","./FormSurveyPayment.e8fc928c.css","./vue-multiselect.eb3eab67.css","./app.5efdd9e1.css"],import.meta.url).then(t=>t.default||t)),Hi=x(()=>R(()=>import("./FileUploadElement.7513d0c0.js"),["./FileUploadElement.923d31a8.css"],import.meta.url).then(t=>t.default||t)),Gi=x(()=>R(()=>import("./SignatureElement.525a3562.js"),["./SignatureElement.99ad4b71.css"],import.meta.url).then(t=>t.default||t)),Ki=x(()=>R(()=>import("./AddGuest.534caaf0.js"),["./AddGuest.79393527.css"],import.meta.url).then(t=>t.default||t)),Ji=x(()=>R(()=>import("./AddGuestOld.a44124f3.js"),["./AddGuestOld.b3decca9.css"],import.meta.url).then(t=>t.default||t)),Qi=x(()=>R(()=>import("./Branding.70f4956b.js"),[],import.meta.url).then(t=>t.default||t)),Yi=x(()=>R(()=>import("./OrderConfirmation.d115759c.js"),["./TextElement.0b941f97.css","./TextBoxListElement.b602ad61.css","./OptionElement.05aaf420.css","./OrderConfirmation.e98c5326.css","./vue-multiselect.eb3eab67.css","./app.5efdd9e1.css"],import.meta.url).then(t=>t.default||t)),Zi=x(()=>R(()=>import("./ThanksMessage.97a42836.js"),["./ThanksMessage.37e050aa.css"],import.meta.url).then(t=>t.default||t)),Xi=x(()=>R(()=>import("./CalendarPaymentPage.3c682d35.js").then(t=>t.a),["./ghl-payment-element.7c35df0b.css","./CalendarPaymentPage.72901707.css"],import.meta.url).then(t=>t.default||t)),es={ref:"hl-app",class:"hl-app"},ts={key:0},os=["id"],rs={key:0,class:"col-sm-12 col-12"},as={class:"loader-container"},ks=Ma({__name:"FormComponent",props:{formId:{type:String,default:void 0},formData:{type:Object||Array,required:!0},calendar:{type:Object,default:void 0},selectedSlot:{type:Object,default:void 0},timezone:{type:String,default:void 0},event:{type:Object,default:void 0},error:{type:String,default:void 0},redirect:{type:Boolean,default:!0},funnelPreview:{type:Boolean,default:!1},formElementClass:{type:String,required:!1},calendarEventId:{type:String,required:!1},forCalendarV3:{type:Boolean,default:!1},pageUrl:{type:String,default:void 0},baseReferrrer:{type:String,default:void 0},urlParams:{type:Object,default:void 0},stickyContactData:{type:Object,default:void 0},stickyContactFingerprint:{type:String,default:void 0},iFrameId:{type:String,default:void 0},guests:{type:Array,default:[]},guestCountDetail:{type:Object,default:{}},seatsPerSlotData:{type:Object,default:{availableSeats:0,enableGuestSeating:!1}},calendarConfirmationButtonText:{type:String,default:void 0},isNewCalendarWidgetEnabled:{type:Boolean,default:!1},formSubmissionInstruction:{type:Object,default:{onlySubmitForm:!1,isRecurring:!1,shouldPayUsingPaymentElement:!1}},meetingLocationId:{type:String,default:void 0},bookerMeetingLocation:{type:String,default:void 0},calendarServiceHelper:{type:Object,default:{}},locale:{type:String,default:"en"}},emits:["step","processError","disableBackOnSubmit","onSubmit","onFormSubmitCallback","onProcessCalendarPayment"],async setup(t,{emit:s}){var or;let f,P;const r=t;lt.extend(Dn),lt.extend(Ln),lt.extend(zn);const{t:K}=qa(),k=tn(),F=Wa();let de={},Je={},Qe={},ge=p(!0),We={},He=p(!1),_=p([]),Ge={},$={},fe={},St=p(""),it=p(!1),q=p(!0),Gt={},Et=p(!1),wt={},Pt={},Ke=p(!1),V=p(""),ce=p(!1),Kt=p("US"),kt=p(),Ye=p("");p("");let Tt=p(""),Jr=p([]),Ze=p(!1);const Po=p("");let Jt=p(),Pe=p({}),Qt=p(!0),Te=p(""),Oe=p(),Ot=p(),Yt=p(),Zt=p(),j=p(),ke=p(),At=p(),Qr={},Xt=p(),T=p([]),eo=p(!1),Xe=p(""),et=p("");const ko=p(!1),to=p(""),st=p(),e=Ha({phoneCountryIncluded:de,phoneCountryCode:Qe,formattedPhone:Je,form:We,formStyle:Ge,buttonStyle:$,company:Gt,formFieldsValue:wt,validationError:Pt,fieldStyle:fe,errors:Qr}),oo=p(),ro=p(),ao=p(),Vt=p(),no=p({}),To=p(),tt=p(),ut=p(),lo=p(),dt=p(),ct=p(),he=p({paymentType:we.DONATION,orderId:void 0}),mt=p(!1),ft=p([]),Dt=p({}),Oo=p(),pt=p(!!(F.query.payment_intent||F.query.setup_intent)),Ao=p(),{getFormStyle:Yr,setFormStyle:Zr,getFormWidth:io}=mn(),{authorizeNetDispatchData:Xr,setAuthorizeNetErrorResponse:so,authorizeNetErrorResponse:ea,authorizeNetCardNumberError:Vo,authorizeNetCardExpiryError:Do,authorizeNetCardCVCError:Lo,setAuthorizeNetCardNumberError:zo,setAuthorizeNetExpiryError:Uo,setAuthorizeNetCVCError:No,clearAuthorizeNetNewCardFormErrors:ta}=dn(),xo=p(0),uo=p(null),Ro=(o,n=!1)=>n&&o==="submit"?!1:Co.indexOf(o)>=0,oa={bgColor:"E9ECEFFF",labelColor:((or=e==null?void 0:e.fieldStyle)==null?void 0:or.labelColor)||"",placeholderColor:"",border:"",width:"",padding:{top:15,bottom:15,left:20,right:20},shadow:""},ra=o=>{var n,l;dt.value=o,e.formFieldsValue.payment=((l=(n=e.form)==null?void 0:n.payment)==null?void 0:l.currency.symbol)+o},aa=o=>{he.value.orderId=o._id,he.value.paymentType=we.PRODUCT,he.value.amount=o.amount,he.value.currency=o.currency},na=o=>{e.formFieldsValue.emailVerified=o},$o=o=>{e.formFieldsValue.phoneVerified=o},la=()=>{if(r.calendar&&e.form.fullScreenMode)return{padding:"20px !important"};if(e.form.fullScreenMode)return{padding:"0px !important"}},ia=(o,n)=>e.form.layout===Ft.ONE_COLUMN?"col-12":(e.form.layout===Ft.TWO_COLUMN||e.form.layout===!0)&&!Ro(o.type)&&Ut(n)?"menu-field-wrap col-sm-6 col-6":e.form.layout===Ft.SINGLE_LINE?"menu-field-wrap col-12":"col-12",sa=(o,n)=>{let l="";return Ro(o.type,!0)||(l=`
    @media screen and (min-width: 1025px) {
        #el_${o.tag+"_"+n} {
        max-width: ${o.fullwidth?"100":o.fieldWidthPercentage}%;
        width: ${o.fullwidth?"100":o.fieldWidthPercentage}% !important;
        flex: 0 0 ${o.fullwidth?"100":o.fieldWidthPercentage}% !important;
      }
    `),l},ua=o=>({marginBottom:da(o)}),da=o=>{var n,l;return o.hidden?0:(l=(n=e.form)==null?void 0:n.style)!=null&&l.hasOwnProperty("fieldSpacing")?e.form.style.fieldSpacing+"px":"16px"},co=o=>{T.value.push(o)},ca=o=>o?"@import url('https://web.archive.org/web/20240921131040/https://fonts.bunny.net/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i');":"@import url('https://web.archive.org/web/20240921131040/https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i');",ma=async()=>{var v,O,D,L,m,Y,B,S,z,ne,Q,Z,U,A,X,re,ae,le,H,b,I,ee,me,te,J,Ce,se,Ie,pe,Fe,Ae,Ve,De,Le,ze,Ue,u,C,Ne,xe,Re,d,w,g,ie,G,oe,Se,$e,Be,je,Me,qe,ye,_t,gt,ht,bt,y,rr,ar,nr,lr,ir,sr,ur,dr,cr,mr;const{locationId:o,form:n,country:l}=r.formData;if(!o||!n)return;e.form=zr(n),Tt.value=(v=e.form)==null?void 0:v.fbPixelId,V.value=o,Kt.value=l,Ze.value="stickyContact"in e.form?(O=e.form)==null?void 0:O.stickyContact:!1,Oo.value=ca(e.form.isGDPRCompliant);const c=r.formElementClass?`.${r.formElementClass}${Ir}`:Ir;if("layout"in e.form&&(it.value=[!0,Ft.TWO_COLUMN,Ft.SINGLE_LINE].includes((D=e.form)==null?void 0:D.layout)),"fields"in e.form&&(_.value=[...(L=e.form)==null?void 0:L.fields]),"style"in e.form){Zr((m=e==null?void 0:e.form)==null?void 0:m.style,(Y=e==null?void 0:e.form)==null?void 0:Y.width),st.value=(S=(B=r==null?void 0:r.formData)==null?void 0:B.form)==null?void 0:S.fieldCSS,st.value&&!_o()&&r.formElementClass&&(st.value=st.value.replace(/#_builder-form/g,`.${r.formElementClass} #_builder-form`)),Et.value=((ne=(z=e.form)==null?void 0:z.style)==null?void 0:ne.ac_branding)??((Z=(Q=e.form)==null?void 0:Q.style)==null?void 0:Z.acBranding);const ue=(A=(U=e.form)==null?void 0:U.style)==null?void 0:A.bgImage;ue&&(Po.value=`${r.funnelPreview?`.${r.formElementClass} #form-builder`:"body"} {background-image: url('${ue}');
        background-size: cover;
        background-repeat: no-repeat;
        background-attachment: fixed;
        background-position: top center}`)}((ae=(re=(X=e.form.formAction)==null?void 0:X.headerImageSrc)==null?void 0:re.trim())==null?void 0:ae.length)>0&&(to.value=e.form.formAction.headerImageSrc),"button"in e.form&&(e.buttonStyle={bgColor:(H=(le=e.form)==null?void 0:le.button)==null?void 0:H.background,color:(I=(b=e.form)==null?void 0:b.button)==null?void 0:I.color,border:((te=(me=(ee=e.form)==null?void 0:ee.button)==null?void 0:me.border)==null?void 0:te.border)||0,borderColor:((se=(Ce=(J=e.form)==null?void 0:J.button)==null?void 0:Ce.border)==null?void 0:se.color)||Tn,radius:(Fe=(pe=(Ie=e.form)==null?void 0:Ie.button)==null?void 0:pe.border)==null?void 0:Fe.radius,padding:(De=(Ve=(Ae=e.form)==null?void 0:Ae.button)==null?void 0:Ve.border)==null?void 0:De.padding}),(ze=(Le=e.form)==null?void 0:Le.style)!=null&&ze.color&&(Jt.value=`${c}label{ color:#${(u=(Ue=e.form)==null?void 0:Ue.style)==null?void 0:u.color} }`),(Ne=(C=e.form)==null?void 0:C.fieldStyle)!=null&&Ne.labelColor&&(Jt.value=`${c}label{ color:#${e.form.fieldStyle.labelColor} }`),"fieldStyle"in e.form?e.fieldStyle={bgColor:(Re=(xe=e==null?void 0:e.form)==null?void 0:xe.fieldStyle)==null?void 0:Re.bgColor,labelColor:(w=(d=e==null?void 0:e.form)==null?void 0:d.fieldStyle)==null?void 0:w.labelColor,labelFontFamily:(ie=(g=e==null?void 0:e.form)==null?void 0:g.fieldStyle)==null?void 0:ie.labelFontFamily,placeholderColor:(oe=(G=e==null?void 0:e.form)==null?void 0:G.fieldStyle)==null?void 0:oe.placeholderColor,border:($e=(Se=e==null?void 0:e.form)==null?void 0:Se.fieldStyle)==null?void 0:$e.border,width:(je=(Be=e==null?void 0:e.form)==null?void 0:Be.fieldStyle)==null?void 0:je.width,padding:(qe=(Me=e==null?void 0:e.form)==null?void 0:Me.fieldStyle)==null?void 0:qe.padding,shadow:(_t=(ye=e==null?void 0:e.form)==null?void 0:ye.fieldStyle)==null?void 0:_t.shadow}:e.fieldStyle=oa,"customStyle"in e.form&&((ht=(gt=e.form)==null?void 0:gt.customStyle)==null?void 0:ht.length)>0&&(St.value=e.form.customStyle.replace(".form-element","")),"company"in e.form&&(e.company=(bt=e.form)==null?void 0:bt.company),"formLabelVisible"in e.form&&(q.value=(y=e.form)==null?void 0:y.formLabelVisible);let i=r.calendar||(rr=e.form)==null?void 0:rr.payment;if(!i&&(ar=r.calendar)!=null&&ar.stripe&&(((lr=(nr=r.calendar)==null?void 0:nr.stripe)==null?void 0:lr.amount)==0||(sr=(ir=r.calendar)==null?void 0:ir.stripe)!=null&&sr.currency)){const ue={...r.calendar.stripe};ue.amount=ue!=null&&ue.hasOwnProperty("deposit")?Er(ue):ue==null?void 0:ue.amount,delete ue.deposit,delete ue.depositType,i=ue}i&&(Oe.value={default_payment_provider:i.paymentProvider,publishable_key:i.publishable_key,account_id:i.account_id,amount:(parseFloat(i.amount)*100).toFixed(2),name:i.amount?"Pay to processed":"Verify your card",description:i.charge_description,currency:i.currency}),ge.value=!1,((dr=(ur=e.form)==null?void 0:ur.payment)==null?void 0:dr.paymentType)==="product"&&((mr=(cr=e.form)==null?void 0:cr.payment)==null?void 0:mr.products.length)>0&&await fa()},mo=Cn(),{$bus:ot}=on(),be=p([]),Lt=p([]),Bo=p(!1),fa=async()=>{const o=e.form.payment.products.map(l=>l.productId),n=await Io.getPublicProducts({locationId:r.formData.locationId,productIds:o,includeNonStoreProducts:!0});Bo.value=!0,Lt.value=e.form.payment.products.map(l=>{let c={};return n.products.forEach(i=>{l.productId===i._id&&(c=i)}),c={...c,...l,quantity:1},c}).filter(l=>l._id!==void 0)};[f,P]=Ga(()=>ma()),await f,P();const jo=ve(()=>_.value.find(o=>o.type==="submit")),Mo=ve(()=>r.calendar&&r.calendar.enable_guests),qo=ve(()=>r.calendar&&r.calendar.enable_guests&&r.calendar.guest_type==="count_only"),Wo=ve(()=>{var o;return((o=Oe.value)==null?void 0:o.default_payment_provider)==="stripe"}),Ho=ve(()=>{var o;return((o=Oe.value)==null?void 0:o.default_payment_provider)==="authorize-net"}),pa=ve(()=>On.find(o=>o.code===Kt.value)),Go=ve(()=>kt.value||Kt.value),ya=ve(()=>Object.values(bo)),yt=ve(()=>{var o,n,l,c,i,v;return(((o=r==null?void 0:r.calendar)==null?void 0:o.calendar_type)==="round_robin"||((n=r==null?void 0:r.calendar)==null?void 0:n.calendar_type)==="service_booking")&&((c=(l=r==null?void 0:r.calendar)==null?void 0:l.team_members)==null?void 0:c.length)===1?r==null?void 0:r.calendar.team_members[0].location_configurations:((i=r==null?void 0:r.calendar)==null?void 0:i.calendar_type)==="event"?(v=r==null?void 0:r.calendar)==null?void 0:v.location_configurations:null}),va=(o,n)=>{Xe.value=o,n&&(et.value=n)};ve(()=>e.formStyle.border==="0"?"form-top-padding":"");const _a=(o,n)=>{var l;mt.value=o.length>0,ft.value=o,Dt.value=n,e.formFieldsValue.payment=(Un((l=ft.value[0])==null?void 0:l.currency)||"$")+n.summary.total},ga=o=>{Ao.value=o},ha=ve(()=>{var o,n,l,c,i,v,O,D,L,m,Y;return(n=(o=_.value.filter(B=>B.hiddenFieldQueryKey==="payment"))==null?void 0:o[0])!=null&&n.hidden?!1:((c=(l=e.form)==null?void 0:l.payment)==null?void 0:c.paymentType)===we.PRODUCT?((v=(i=e.form)==null?void 0:i.payment)==null?void 0:v.required)&&((L=(D=(O=e.form)==null?void 0:O.payment)==null?void 0:D.products)==null?void 0:L.length)||mt.value:((Y=(m=e.form)==null?void 0:m.payment)==null?void 0:Y.required)||dt.value});Ka({__dangerouslyDisableSanitizers:["style"],style:[{children:Po.value,type:"text/css"},{children:st.value,type:"text/css"},{children:Jt.value,type:"text/css"},{children:St.value,type:"text/css"},{children:Oo.value,type:"text/css"}],meta:[{name:"apple-mobile-web-app-capable",content:"yes"},{name:"viewport",content:"minimum-scale=1.0, width=device-width, maximum-scale=1, user-scalable=no"}]});let Ko=!1;setTimeout(()=>{It(r.urlParams,F,e.phoneCountryIncluded,j.value,e.formFieldsValue,_.value).then(o=>{e.phoneCountryIncluded=o.phoneCountryIncluded,e.formFieldsValue=o.formFieldsValue,j.value=o.formattedCountry,_.value=o.formFields})},_o()?1e3:100);const Jo=p("");_.value.forEach((o,n)=>{if(o.type==="textbox_list"){const l={};o.picklistOptions.forEach(c=>{l[c.id]=c.prefillValue}),e.formFieldsValue[o.tag]=l}else o.type==="source"?e.formFieldsValue[o.tag]=o.value:o.type==="checkbox"&&!(e.formFieldsValue[o.tag]instanceof Array)?e.formFieldsValue[o.tag]=[]:o.type==="submit"&&(Ko=!0,r.calendar&&(o.label&&o.label.toLowerCase()==="button"||o.label.trim().length<=0)&&(o.label=r.calendarConfirmationButtonText?r.calendarConfirmationButtonText:K(r.forCalendarV3?"schedule_meeting":"book_appointment")));Jo.value+=sa(o,n)}),Ko||_.value.push({label:r.calendarConfirmationButtonText?r.calendarConfirmationButtonText:r.calendar?K(r.forCalendarV3?"schedule_meeting":"book_appointment"):K("submit"),tag:"button",palceholder:"button",type:"submit"}),_.value.length>0&&_.value.forEach((o,n)=>{if(o.type==="html"&&o&&"html"in o){const l=o.html.replace(/[‘’]/g,"'").replace(/[“”]/g,'"');Jr.value.push({scriptString:l,index:n})}}),Te.value=Math.random().toString(36).slice(2),r.urlParams&&It(r.urlParams,F,e.phoneCountryIncluded,j.value,e.formFieldsValue,_.value).then(o=>{e.phoneCountryIncluded=o.phoneCountryIncluded,e.formFieldsValue=o.formFieldsValue,j.value=o.formattedCountry,_.value=o.formFields,setTimeout(()=>fo(),1e3)}),Ja(async()=>{var c;!r.funnelPreview&&Tt.value!==void 0&&Tt.value!==""&&Rt(()=>{Vn(Tt.value,e.form.pageViewEvent)}),Ba();const o=F.query.payment_intent,n=F.query.transactionId;o&&(pt.value=!0,await fr(o,r.formId||"",n)?await tr():(sessionStorage.removeItem(`submissionResponse-${r.formId}`),sessionStorage.removeItem(`formOrderResponse-${r.formId}`)),pt.value=!1);const l=F.query.setup_intent;if(l&&(pt.value=!0,await fr(o,r.formId||"",n,l)?await tr():(sessionStorage.removeItem(`submissionResponse-${r.formId}`),sessionStorage.removeItem(`formOrderResponse-${r.formId}`)),pt.value=!1),Ze.value&&(be.value=_.value.map(i=>i.tag),vo(void 0,V.value,be.value,e.formFieldsValue,e.phoneCountryIncluded,j.value).then(i=>{i?(e.formFieldsValue=i.formFieldsValue,e.phoneCountryIncluded=i.phoneCountryIncluded,j.value=i.formattedCountry):console.warn("Data not found! skippping stickycontact fill")}).catch(i=>{console.error("Failed at fillDataFromCookie",i)})),F.query.hasOwnProperty("sticky_contact_help")&&F.query.sticky_contact_help==="true"&&(console.log("%c Sticky Contact data","color: black; font-weight: bold; background-color: white"),console.log("%c ===================","color: black; font-weight: bold; background-color: white"),console.log(JSON.parse(go("_ud"))),console.log("%c ===================","color: black; font-weight: bold; background-color: white")),Rt(()=>{He.value=!0}),r.calendar){if(r.locale!=="en"&&r.locale!=="en_US"){window.dayjs=lt;const i=Sr(r.locale);await In(`unpkg.com/dayjs@1.8.21/locale/${i}.js`,()=>{lt.locale(i)})}ot.$on("submitCalendarForm",xt)}if(r.calendar&&r.meetingLocationId&&(Xe.value=r.meetingLocationId,r.bookerMeetingLocation&&(et.value=r.bookerMeetingLocation)),r.stickyContactData&&Ze.value&&(be.value||(be.value=_.value.map(i=>i.tag)),vo(r.stickyContactData,V.value,be.value,e.formFieldsValue,e.phoneCountryIncluded,j.value).then(i=>{e.formFieldsValue=i.formFieldsValue,e.phoneCountryIncluded=i.phoneCountryIncluded,j.value=i.formattedCountry}).catch(i=>{console.error("Failed at fillDataFromCookie at sticky contact",i)})),eo.value=!0,xo.value=new Date().getTime(),!F.query.notrack){let i=ho((c=r==null?void 0:r.formData)==null?void 0:c.locationId);const v=await yr({fingerprint:i,eventType:"form-view",mediumId:r.formId,medium:"form",locationId:r.formData.locationId,name:r.formData.name}),O=$t(v,D=>{i!==D.fingerprint&&(i=D.fingerprint),O()})}setTimeout(()=>{fo(),Xo(e.formFieldsValue),ko.value=!0},100)}),Qa(()=>{T.value=[]}),$t(()=>r.urlParams,(o,n)=>{r.urlParams&&It(r.urlParams,F,e.phoneCountryIncluded,j.value,e.formFieldsValue,_.value).then(l=>{e.phoneCountryIncluded=l.phoneCountryIncluded,e.formFieldsValue=l.formFieldsValue,j.value=l.formattedCountry,_.value=l.formFields})}),$t(()=>r.stickyContactData,(o,n)=>{r.stickyContactData&&Ze.value&&(be.value||(be.value=_.value.map(l=>l.tag)),vo(r.stickyContactData,V.value,be.value,e.formFieldsValue,e.phoneCountryIncluded,j.value).then(l=>{e.formFieldsValue=l.formFieldsValue,e.phoneCountryIncluded=l.phoneCountryIncluded,j.value=l.formattedCountry}).catch(l=>{console.error("Failed at fillDataFromCookie at sticky contact",l)}))}),$t(()=>e.formFieldsValue,()=>{Nt(e.formFieldsValue,!0),Xo(e.formFieldsValue)},{deep:!0});const Qo=o=>{kt.value=o},ba=o=>{e.validationError=o},Ca=o=>{Ot.value=o},Ia=o=>{Yt.value=o},Fa=(o,n,l)=>{oo.value=o&&o.length?o.replace(/\s/g,""):null,n&&n.length&&n.includes("/")&&(n=n.split("/"),ro.value=n[0],ao.value=n[1]),Vt.value=l},Sa=o=>{ke.value=o},vt=o=>{const{tag:n,value:l}=o;e.formFieldsValue[n]=l},Ea=o=>{j.value=o,Nt({...e.formFieldsValue,country:o},!0)},wa=o=>{At.value=o},W=o=>{const{tag:n,error:l}=o;e.errors[n]=l,Pa(o),Yo()},Pa=o=>{const{tag:n,error:l}=o;if(n=="email"&&r.guests.length>=1){const c=[e.formFieldsValue[n]];r.guests.forEach(i=>{c.includes(i.email)?(i.emailError="Email IDs must be unique for guests.",i.invalidEmail=!0):(i.emailError="",i.invalidEmail=!1),c.push(i.email)})}},ka=o=>{Xt.value=o},Ta=o=>{const{date:n,item:l}=o;e.formFieldsValue[l.tag]=n},zt=o=>{const n=e.phoneCountryIncluded[o.tag],l=e.phoneCountryCode[o.tag];e.formFieldsValue[o.tag]=n,o.tag==="phone"&&(Ye.value=e.formFieldsValue[o.tag]);try{const c=window.libphonenumber.parsePhoneNumberFromString(n,l);o.tag==="phone"&&(Ye.value=c.isValid()?c.number:n),e.phoneCountryIncluded[o.tag]=c.isValid()?c.number:n,e.phoneCountryCode[o.tag]=c.country?c.country:l,e.formattedPhone[o.tag]=c.isValid()?c.formatNational():n}catch{e.phoneCountryIncluded[o.tag]=n,e.formattedPhone[o.tag]=n}},Oa=()=>{let o=!1,n=0;return _.value.map(l=>{l.type==="cascade_dropdown"&&l.required&&e.formFieldsValue[l.tag]===void 0?(Qt.value=!1,o=!0):e.formFieldsValue[l.tag]!==void 0&&l.type==="cascade_dropdown"&&(e.formFieldsValue[l.tag].forEach(function(i){for(const v in i)i[v]===""&&n++}),n>0?(Qt.value=!1,o=!0):Qt.value=!0)}),o},Aa=async()=>{const o=T.value.map(l=>{if(l!=null&&l.validate)return l.validate()});return await Promise.all(o),await Yo()},Va=async()=>{let o=!1;const n=T.value.map(l=>{var c;((c=l==null?void 0:l.item)==null?void 0:c.type)==="captcha"&&(o=!0)});return await Promise.all(n),o},Yo=async()=>{const o=Object.values(e.errors);let n=!1;return await Promise.all(o.map(l=>{l&&(n=!0)})),n},Ut=o=>{var l;return o===_.value.length-1||Co.indexOf((l=_.value[o+1])==null?void 0:l.type)>=0?Zo(o):!0},Zo=o=>Da(o)%2===0,Da=o=>{let n=0;for(let l=o;l>=0;l--)if(Co.indexOf(_.value[l].type)===-1)n+=1;else return n;return n},La=o=>{e.formFieldsValue[o.tag]=""},za=o=>{const{item:n,event:l}=o;e.formFieldsValue[n.tag]=l.target.value},Ua=o=>{for(const n of _.value)if(n.hiddenFieldQueryKey===o&&(n.Id||n.id))return n.Id||n.id;return null},Nt=(o,n=!1)=>{var O,D,L,m,Y,B,S,z,ne,Q,Z,U,A,X,re,ae,le,H;const l={...o};if(j.value&&n&&(l.country=j.value),l!=null&&l.phone&&n){const b=(D=(O=window.libphonenumber)==null?void 0:O.parsePhoneNumberFromString(o.phone,e.phoneCountryCode.phone))==null?void 0:D.number;b&&(l.phone=b)}if(!((L=e.form)!=null&&L.conditionalLogic)||!((m=e.form.conditionalLogic)!=null&&m.length))return;const c=new Set,i=new Set,v=(B=(Y=e.form)==null?void 0:Y.conditionalLogic)==null?void 0:B.filter(b=>{var I,ee;return n?((I=b==null?void 0:b.outcome)==null?void 0:I.type)==="showHideFields":b.conditions!==null&&((ee=b==null?void 0:b.outcome)==null?void 0:ee.type)!=="showHideFields"});for(let b=0;b<v.length;b++){const I=v[b];let ee=I.conditionalOperation==="and";const me={...l};for(let te=0;te<I.conditions.length;te++){let{selectedField:J,selectedOperation:Ce,inputValue:se}=I.conditions[te];J==="country"&&!n&&bo[me[J]]&&(me[J]=bo[me[J]]);const Ie=Ua(J);Ie!==null&&(J=Ie);const pe=me[J],Fe=Pi(Ce,typeof pe=="string"?pe.toLowerCase():pe,typeof se=="string"?se.toLowerCase():se);if(I.conditionalOperation==="and"&&!Fe){ee=!1;break}if((I.conditionalOperation==="or"||I.conditionalOperation==="then")&&Fe){ee=!0;break}}if(((S=I.outcome)==null?void 0:S.type)==="showHideFields"&&n&&ee){const{hideType:te,value:J}=I.outcome;(Array.isArray(J)?J:[J]).forEach(se=>{te.includes("Show")?c.add(se):te.includes("Hide")&&i.add(se)})}if(ee){if(((z=I.outcome)==null?void 0:z.type)==="displayCustomMessage"||((ne=I.outcome)==null?void 0:ne.type)==="disqualifyLead"&&((Q=I.outcome)==null?void 0:Q.disqualifyAction)==="showCustomMessage"?(e.form.formAction.actionType="2",e.form.formAction.thankyouText=I.outcome.value):(((Z=I.outcome)==null?void 0:Z.type)==="redirectToUrl"||((U=I.outcome)==null?void 0:U.type)==="disqualifyLead"&&((A=I.outcome)==null?void 0:A.disqualifyAction)==="openUrl")&&(e.form.formAction.actionType="1",e.form.formAction.redirectUrl=I.outcome.value,e.form.formAction.redirect_url=I.outcome.value),((X=I.outcome)==null?void 0:X.type)==="disqualifyLead"&&(e.form.disqualified=!0),!n)break}else((ae=(re=e.form)==null?void 0:re.payment)!=null&&ae.required||dt.value||mt.value)&&!((H=(le=_.value)==null?void 0:le.find(te=>te.hiddenFieldQueryKey==="payment"))!=null&&H.hidden)&&(e.form.formAction.actionType=r.formData.form.formAction.actionType,e.form.formAction.thankyouText=r.formData.form.formAction.thankyouText,e.form.formAction.redirectUrl=r.formData.form.formAction.redirectUrl,e.form.disqualified=void 0)}c.forEach(b=>i.delete(b)),uo.value&&(_.value=uo.value),_.value=_.value.map(b=>{if(c.has(b.hiddenFieldQueryKey)){const I=r.formData.form.fields.find(ee=>ee.hiddenFieldQueryKey===b.hiddenFieldQueryKey);return{...b,hidden:!1,hiddenFieldValue:(I==null?void 0:I.hiddenFieldValue)||"",required:(I==null?void 0:I.required)||!1}}else if(i.has(b.hiddenFieldQueryKey))return{...b,hidden:!0,required:!1};return b}),It(r.urlParams,F,e.phoneCountryIncluded,j.value,e.formFieldsValue,_.value,!0).then(b=>{e.phoneCountryIncluded=b.phoneCountryIncluded,e.formFieldsValue=b.formFieldsValue,j.value=b.formattedCountry,_.value=b.formFields})},Xo=o=>{fn(e.form,_.value,o).forEach(({hiddenFieldQueryKey:l,result:c})=>{e.formFieldsValue[l]=c})},fo=()=>{var c,i;setTimeout(()=>Nt(e.formFieldsValue,!0),0);const o=(i=(c=e.form)==null?void 0:c.conditionalLogic)==null?void 0:i.filter(v=>{var O;return((O=v==null?void 0:v.outcome)==null?void 0:O.type)==="showHideFields"});let n=[],l=[];o&&(o.forEach(v=>{if(v.outcome.type==="showHideFields"){const{hideType:O,value:D}=v.outcome,L=Array.isArray(D)?D:[D];O.includes("Show")?(n=[...new Set([...n,...L])],l=l.filter(m=>!L.includes(m))):O.includes("Hide")&&(l=[...new Set([...l,...L])],n=n.filter(m=>!L.includes(m)))}}),_.value.forEach(v=>{n.includes(v.hiddenFieldQueryKey)?(v.hidden=!0,v.required=!1,v.hiddenFieldValue=""):l.includes(v.hiddenFieldQueryKey)&&(v.hidden=!1,v.hiddenFieldValue="")}),uo.value=zr(_.value))},Na=async()=>(await yn(e.formFieldsValue,j.value),(await vn(F,_.value,e.formFieldsValue)).formFieldsValue),xt=async()=>{var v,O,D,L,m,Y,B,S,z,ne,Q,Z;let o=r.formSubmissionInstruction;if(o.isRecurring=(o==null?void 0:o.isRecurring)??((v=r.calendar)==null?void 0:v.enable_recurring),ke.value)return;for(let U in e.phoneCountryIncluded)e.phoneCountryIncluded[U]&&zt({tag:U});if(await pn(e.formFieldsValue)>Fn){alert("The total size of the attached files cannot be more that 50MB");return}if(e.validationError={},await Aa()||Oa())return;if(await Va()&&(At.value===void 0||At.value==="0")){e.validationError.captcha="Invalid Captcha";return}let i;if(s("disableBackOnSubmit",{disable:!0}),ce.value=!0,ke.value="",!((D=(O=r.calendarServiceHelper)==null?void 0:O.state)!=null&&D.isFormFirst)&&!((m=(L=r.calendarServiceHelper)==null?void 0:L.state)!=null&&m.isCustomPaymentProvider)&&((B=(Y=r.calendarServiceHelper)==null?void 0:Y.state)!=null&&B.isPaymentEnabled)&&!await((S=r.calendarServiceHelper)==null?void 0:S.newCardPaymentElementRef.value.validatePayment()))return s("disableBackOnSubmit",{disable:!1}),ce.value=!1,!1;if(!(o!=null&&o.onlySubmitForm)&&!(o!=null&&o.shouldPayUsingPaymentElement)){if(Wo.value&&Oe.value&&!Zt.value){i={};try{const{client_secret:U}=await $fetch(k.public.serverBaseUrl+"/appointment/setup-intent",{method:"POST",body:{locationId:r.formData.locationId,calendarId:r.calendar.id}});if(!U)throw ke.value="Something went wrong while processing your payment, please try again.",new Error("clientSecret missing");let A,X;if(e.formFieldsValue.first_name&&(X=e.formFieldsValue.first_name.trim()),e.formFieldsValue.full_name&&(X=e.formFieldsValue.full_name.trim()),A=await Ot.value.confirmCardSetup(U,{payment_method:{card:Yt.value,billing_details:X?{name:X}:{}}},{handleActions:!1}),A.error)throw ke.value=A.error.message,A.error;{const re={...e.formFieldsValue};if(Ze.value){let H;if(typeof Storage<"u")try{H=go(V.value)}catch{console.error("Failed to fetch contact from local storage")}H||(H=_e(V.value).value||_e("msgsndr_id").value),H&&(re.contact_id=H)}Ye.value&&(re.phone=Ye.value);const ae={location_id:V.value,calendar_id:r.calendar.id,payment_method_id:A.setupIntent.payment_method,setup_intent_status:A.setupIntent.status,customer_data:re},le=await $fetch(k.public.serverBaseUrl+"/appointment/setup-stripe-customer-and-payment-intent",{method:"POST",body:ae});if(le.status==="requires_action"){const H=await Ot.value.handleCardAction(le.client_secret);if(H.error)throw ke.value=H.error.message,H.error;i.payment_intent_id=H.paymentIntent.id}else i.payment_intent_id=le.id;i.stripe_customer_id=le.stripe_customer_id}}catch(U){return console.error(U),ke.value||(ke.value="Something went wrong while processing your payment, please try again."),s("disableBackOnSubmit",{disable:!1}),ce.value=!1,!1}}else if(Ho.value&&Oe.value){i={};let U=!1;if(oo.value||(zo(!0),U=!0),(!ro.value||!ao.value)&&(Uo(!0),U=!0),Vt.value||(No(!0),U=!0),U||Vo.value||Do.value||Lo.value)return;so(""),ta();try{const{publishable_key:A,account_id:X}=Oe.value,re={authData:{clientKey:A,apiLoginID:X},cardData:{cardNumber:oo.value,month:ro.value,year:ao.value,cardCode:Vt.value}},ae=await Xr(re);i={opaqueData:ae==null?void 0:ae.opaqueData,cardCode:Vt.value}}catch(A){if(A.type==="authorizeNetServerError"){so((Z=(Q=(ne=(z=A==null?void 0:A.response)==null?void 0:z.messages)==null?void 0:ne.message)==null?void 0:Q[0])==null?void 0:Z.text);return}so((A==null?void 0:A.message)||"Something went wrong!")}}}e.formFieldsValue=await Na(),await Ra(i,o),s("disableBackOnSubmit",{disable:!0})},xa=o=>{const n={};for(const l in o)o.hasOwnProperty(l)&&(n[l.replace(/(\_\w)/g,function(c){return c[1].toUpperCase()})]=o[l]);return n},Ra=async(o,n)=>{var ne,Q,Z,U,A,X,re,ae,le,H,b,I,ee,me,te,J,Ce,se,Ie,pe,Fe,Ae,Ve,De,Le,ze,Ue,u,C,Ne,xe,Re;const l=_e("msgsndr_id").value;if(r.formId&&(e.formFieldsValue.formId=r.formId),e.formFieldsValue.location_id=V.value,Ye.value&&(e.formFieldsValue.phone=Ye.value),Ze.value){let d;if(r.stickyContactFingerprint&&(d=r.stickyContactFingerprint),!d&&typeof Storage<"u")try{d=go("location_"+V.value)}catch{console.error("Failed to get contact from local storage")}d||(d=_e(V.value).value||l),d&&(e.formFieldsValue.contact_id=d)}const c=F.query.contact_id||((ne=r.urlParams)==null?void 0:ne.contact_id);c&&(e.formFieldsValue.query_contact_id=c);const i=e.formFieldsValue;ut.value=null,(Q=r.calendar)!=null&&Q.form_submit_type?r.calendar.form_submit_type==="RedirectURL"&&(ut.value=r.calendar.form_submit_redirect_url||r.calendar.thank_you_url):((A=(U=(Z=r.calendar)==null?void 0:Z.thank_you_url)==null?void 0:U.trim())==null?void 0:A.length)>0&&(ut.value=(X=r.calendar)==null?void 0:X.thank_you_url),r.event?i.event_id=F.query.event_id:r.calendarEventId&&(i.event_id=r.calendarEventId),r.guests.length?i.guests=r.guests.map(({name:d,email:w})=>({name:d,email:w})):r.guestCountDetail.count&&(i.guestCount=r.guestCountDetail.count),r.calendar&&(i.calendar_id=r.calendar.id,n!=null&&n.onlySubmitForm||(i.selected_slot=(re=r.selectedSlot)==null?void 0:re.format(),i.selected_timezone=r.timezone,Xe.value&&(i.meeting_location_id=Xe.value),et.value&&(i.booker_meeting_location=et.value))),n!=null&&n.onlySubmitForm||(Zt.value?i.stripeToken=Zt.value:o&&(i.stripePaymentResult=o));const v=Sn(i.locationId);v&&(i.sessionId=v),r.calendar&&Rn(r.calendar.id,i),tt.value=En(),i.eventData={...wn(r.pageUrl,r.baseReferrrer),fbEventId:tt.value};let O=ho(i.locationId);if(O&&(i.sessionFingerprint=O),r.funnelPreview){let{domain:d,page_url:w}=F.query;d||(d=window.location.hostname,w=window.location.pathname),i.funneEventData={event_type:"optin",domain_name:d,page_url:w,funnel_id:mo.value.funnelId,page_id:mo.value.funnelPageId,funnel_step_id:mo.value.stepId}}Xt.value&&(i.captchaToken=Xt.value);let D=k.public.REST_API_URLS+"/forms/submit";if(r.calendar){if(r.isNewCalendarWidgetEnabled){const d=r.formElementClass?"booking-"+r.formElementClass:"calendar-"+((ae=r.calendar)==null?void 0:ae.id),w=document.querySelector(`.${d}`);w&&w.scrollIntoView({behavior:"smooth"})}n.onlySubmitForm||(D=k.public.newBaseURL+"/appointment")}let L=new FormData,m={};Object.keys(i).forEach(async d=>{var w;if(i[d]instanceof File)L.append(d,i[d]);else if((w=i[d])!=null&&w.files){const g=Object.values(i[d].files);g.length&&await Promise.all(g.map(ie=>{L.append(d,ie)}))}else(i[d]||i[d]===0)&&(m[d]=i[d])}),F.query.user_id&&(m.user_id=F.query.user_id);const B=_e("am_id").value,S=_e("sam_id").value,z=_e("am_fingerprint").value;if(B&&(m.amId=B),z&&(m.amFingerprint=z),S&&(m.samId=S),r.calendar){if(m.eventData.medium=vr.Calendar,m.eventData.mediumId=m==null?void 0:m.calendar_id,r.formId){let d=_.value.filter(w=>w.type==="date");m.dateFieldDetails=d}}else m.eventData.medium=vr.Form,m.eventData.mediumId=m==null?void 0:m.formId;if(e.form.isLeadGenVideo&&(m.internalSource={type:"hosted_video"}),e.form.enableTimezone!==!1&&(m.Timezone=`${Pn()} ${kn()}`),ct.value&&(m.submissionId=ct.value),no.value&&(m.paymentContactId=no.value),(dt.value||mt.value)&&(m.paymentStatus="Pending"),n!=null&&n.shouldPayUsingPaymentElement&&(m.payment_meta={status:"pending"}),(H=(le=_.value)==null?void 0:le.find(d=>d.hiddenFieldQueryKey==="payment"))!=null&&H.hidden&&(delete m.payment,delete m.paymentStatus,delete m.paymentContactId),n.onlySubmitForm&&(m.internalSource={type:"calendar",id:(b=r.calendar)==null?void 0:b.id},m.source=((I=r.calendar)==null?void 0:I.name)||((ee=r.calendar)==null?void 0:ee.id),m.calendar_name=(me=r.calendar)==null?void 0:me.name,(te=r.calendar)!=null&&te.stripe&&(((Ce=(J=r.calendar)==null?void 0:J.stripe)==null?void 0:Ce.amount)==0||(Ie=(se=r.calendar)==null?void 0:se.stripe)!=null&&Ie.currency))){const d={...r.calendar.stripe};m.payment=d!=null&&d.hasOwnProperty("deposit")?Er(d):d==null?void 0:d.amount}if(s("onFormSubmitCallback",{meetingLocationId:Xe.value,bookerMeetingLocaion:et.value}),n.onlySubmitForm||!(n!=null&&n.isRecurring)){r.calendar||Nt(m),m.disqualified=e.form.disqualified,L.set("formData",JSON.stringify(m));const d={},w=(Fe=(pe=Intl==null?void 0:Intl.DateTimeFormat())==null?void 0:pe.resolvedOptions())==null?void 0:Fe.timeZone;w&&(d.timezone=w),$fetch(D,{method:"POST",body:L,headers:d}).then(async g=>{var G;let ie=ho((G=r==null?void 0:r.formData)==null?void 0:G.locationId);F.query.notrack||yr({fingerprint:ie,eventType:"form-submitted",mediumId:r.formId,medium:"form",locationId:r.formData.locationId,name:r.formData.name,timeSpent:(new Date().getTime()-xo.value)/1e3}),lo.value=g,no.value=g.contactId,ct.value=g.submissionId,sessionStorage.setItem(`submissionResponse-${r.formId}`,JSON.stringify(lo.value)),sessionStorage.setItem(`formData-${r.formId}`,JSON.stringify({phoneCountryIncluded:e.phoneCountryIncluded,formattedCountry:j.value,formFieldsValue:e.formFieldsValue,formFields:_.value,productPurchased:he.value,productPurchasedList:ft.value,productSummary:Dt.value,submissionId:ct.value})),!r.calendar&&ha.value?await To.value.processPayment(g.contactId,g.fingerprint,g.contact):(await po(g),n.onlySubmitForm||(g.formData=m),s("onFormSubmitCallback",{formSubmissionData:g}))}).catch(g=>{var ie,G,oe,Se,$e,Be,je,Me,qe;if(ce.value=!1,console.error("error",g),s("onFormSubmitCallback",{loadingScreen:{showLoadingScreen:!1}}),r.calendar){let ye="";((ie=g==null?void 0:g.response)==null?void 0:ie.status)===502?ye=((oe=(G=g==null?void 0:g.response)==null?void 0:G._data)==null?void 0:oe.msg)||(($e=(Se=g==null?void 0:g.response)==null?void 0:Se.data)==null?void 0:$e.msg)||"Something went wrong with your payment. Please try again.":(ye=((je=(Be=g==null?void 0:g.response)==null?void 0:Be._data)==null?void 0:je.msg)||((qe=(Me=g==null?void 0:g.response)==null?void 0:Me.data)==null?void 0:qe.msg)||K("unable_to_schedule_appointment"),ye=ye||"unable_to_schedule_appointment"),s("processError",{error:ye})}})}else try{m.source="booking_widget",m.channel="private_api";const d=await Mt.createRecurringEvents(xa(m));if(d.ids&&d.ids.length){let w,g=d.fingerprint,ie=d.sessionFingerprint,G={};try{r.calendar&&(w=e.formFieldsValue,g=d.contactId);const oe="_ud";G=await _r(d.contact,!0),r.calendar&&(G={...G,appointment:d.appointment}),Bt(oe,JSON.stringify(G)),Bt("location_"+V.value,g),window.parent.postMessage(["set-sticky-contacts",oe,JSON.stringify(G),V.value,g],"*"),window.parent.postMessage(["set-sticky-contacts",`embedded_iframe_${r.iFrameId}`,r.iFrameId,V.value,g],"*"),r.event||(gr({sessionId:d.sessionId||null,locationId:V.value}),ie&&hr(V.value,ie)),s("onSubmit",{fingerprint:g})}catch(oe){const Se={formData:w||d,eventId:d.ids.join(","),error:oe.stack,isUserSessionLoad:window.userSessionAttribution,logs:window.ConsoleSubscriber?window.ConsoleSubscriber.getErrors():[]};Mt.appointmentBookingLogs((Ve=(Ae=r.calendarServiceHelper)==null?void 0:Ae.state)==null?void 0:Ve.traceId,Se)}if(r.calendar||Rt(()=>{Fr("track",e.form.formSubmissionEvent,tt.value)}),r.calendar){const oe={contactId:d.contactId,calendarThankYouUrl:ut.value,ids:d.ids,fingerprint:g,event_address:d.eventAddress||"",cookiePayload:G,fbEventId:tt.value};s("step",oe);return}if(r.redirect===!1)return;if("formAction"in e.form&&parseInt(e.form.formAction.actionType)===1)window.top.location.href=jt(e.form.formAction.redirect_url||e.form.formAction.redirectUrl,G);else if("redirect_url"in e.form&&e.form.redirect_url!==""||"redirectUrl"in e.form&&e.form.redirectUrl!=="")window.top.location.href=jt(e.form.redirect_url||e.form.redirectUrl,G);else{Ke.value=!0;const oe=e.form.formAction.thankyouText?br(e.form.formAction.thankyouText,G):"Thanks for submiting details, Will get back to you soon!";Pe.value={action:"submit-form",message:oe,style:e.form.submitMessageStyle,isFormPosted:Ke.value,height:(Le=(De=r.formData)==null?void 0:De.form)==null?void 0:Le.height},e.form.isLeadGenVideo&&ot.$emit("video-lead-popup-submitted",e.form.videoId)}e.form.isLeadGenVideo&&ot.$emit("video-lead-popup-submitted",e.form.videoId)}}catch(d){if(console.error("error",d),r.calendar){let w="";((ze=d==null?void 0:d.response)==null?void 0:ze.status)===502?w=((u=(Ue=d==null?void 0:d.response)==null?void 0:Ue.data)==null?void 0:u.msg)||"Something went wrong with your payment. Please try again.":(w=((Ne=(C=d==null?void 0:d.response)==null?void 0:C.data)==null?void 0:Ne.msg)||K("unable_to_schedule_appointment"),w=((Re=(xe=d==null?void 0:d.response)==null?void 0:xe.data)==null?void 0:Re.msg)||"unable_to_schedule_appointment"),s("processError",{error:w})}}},po=async o=>{var l,c,i,v,O,D;const n=_e("msgsndr_id").value;if(o.status||o.id){let L=o.formData,m=o.fingerprint,Y=o.sessionFingerprint,B={};if(n!==m){const S=_e("msgsndr_id",{path:"/",maxAge:31536e3});S.value=m}try{r.calendar&&(L=e.formFieldsValue,m=o.contactId);const S="_ud";if(B=await _r(o.contact,!0),r.calendar){const z=o==null?void 0:o.appointment,ne=Sr(r.locale),Q=(Z,U)=>lt(Z).locale(ne).format(U);if(z){const Z={...z,only_end_date:Q(z.only_end_date,"dddd, ll"),only_start_date:Q(z.only_start_date,"dddd, ll"),start_time:Q(z.start_time,"llll"),end_time:Q(z.end_time,"llll")};B={...B,appointment:Z}}}Bt(S,JSON.stringify(B)),Bt("location_"+V.value,m),window.parent.postMessage(["set-sticky-contacts",S,JSON.stringify(B),V.value,m],"*"),window.parent.postMessage(["set-sticky-contacts",`embedded_iframe_${r.iFrameId}`,r.iFrameId,V.value,m],"*"),r.event||(gr({sessionId:o.sessionId||null,locationId:V.value}),Y&&hr(V.value,Y)),s("onSubmit",{fingerprint:m})}catch(S){const z={formData:L||o,eventId:o.id,error:S.stack,isUserSessionLoad:window.userSessionAttribution,logs:window.ConsoleSubscriber?window.ConsoleSubscriber.getErrors():[]};Mt.appointmentBookingLogs((c=(l=r.calendarServiceHelper)==null?void 0:l.state)==null?void 0:c.traceId,z)}if(r.calendar||Rt(()=>{Fr("track",e.form.formSubmissionEvent,tt.value)}),r.calendar){const S={contactId:o.contactId,calendarThankYouUrl:ut.value,id:o.id,fingerprint:m,event_address:o.event_address,cookiePayload:B,fbEventId:tt.value};s("step",S);return}if(r.redirect===!1)return;if("formAction"in e.form&&parseInt(e.form.formAction.actionType)===1&&!e.form.isLeadGenVideo){const S=jt(e.form.formAction.redirect_url||e.form.formAction.redirectUrl,B);Cr(S)}else if(("redirect_url"in e.form&&e.form.redirect_url!==""||"redirectUrl"in e.form&&e.form.redirectUrl!=="")&&!e.form.isLeadGenVideo){const S=jt(e.form.redirect_url||e.form.redirectUrl,B);Cr(S)}else if("formAction"in e.form&&parseInt((v=(i=e==null?void 0:e.form)==null?void 0:i.formAction)==null?void 0:v.actionType)==3&&he.value.orderId)Ke.value=!0,Pe.value={action:"order",style:{width:e.form.width,style:e.form.style,fieldStyle:e.form.fieldStyle},productPurchased:ft.value.map(S=>(Lt.value.forEach(z=>{z._id===S.productId&&(S.showImage=z.showImage,S.showDescription=z.showDescription)}),S)),orderId:he.value.orderId,productSummary:Dt.value,couponCode:Ao.value,contact:o.contact};else{Ke.value=!0;const S=e.form.formAction.thankyouText?br(e.form.formAction.thankyouText,B):"Thanks for submiting details, Will get back to you soon!";Pe.value={action:"submit-form",message:S,style:e.form.submitMessageStyle,isFormPosted:Ke.value,height:(D=(O=r.formData)==null?void 0:O.form)==null?void 0:D.height},e.form.isLeadGenVideo&&ot.$emit("video-lead-popup-submitted",e.form.videoId)}e.form.isLeadGenVideo&&ot.$emit("video-lead-popup-submitted",e.form.videoId)}},$a=async o=>{var n,l,c;if(o.type==="error")o.message&&(e.form.payment.required||dt.value||mt.value)&&(ce.value=!1,W({tag:"payment",error:o.message}));else if(o.type==="success"){sessionStorage.removeItem(`formOrderResponse-${r.formId}`);const i={submissionId:ct.value,orderId:he.value.orderId,paymentType:((n=he.value)==null?void 0:n.paymentType)===we.PRODUCT?we.PRODUCT:we.DONATION,locationId:V.value,formId:r.formId,transactionId:["authorize-net","nmi","square"].includes(o.provider)?(l=o.data)==null?void 0:l.transactionId:(c=o.data.data)==null?void 0:c.transactionId};await er(i,lo.value)}},er=async(o,n)=>{try{await An.patchSubmission(o),po(n)}catch(l){console.error(l),po(n)}},tr=async()=>{var l;const o=sessionStorage.getItem(`formData-${r.formId}`);if(o){const c=JSON.parse(o);It(r.urlParams,F,c.phoneCountryIncluded,c.formattedCountry,c.formFieldsValue,c.formFields).then(i=>{e.phoneCountryIncluded=i.phoneCountryIncluded,e.formFieldsValue=i.formFieldsValue,j.value=i.formattedCountry,_.value=i.formFields,setTimeout(()=>fo(),1e3)})}const n=sessionStorage.getItem(`submissionResponse-${r.formId}`);if(o&&n){const c=JSON.parse(o),i=JSON.parse(n),v={submissionId:c.submissionId,orderId:c.productPurchased.orderId,paymentType:((l=c.productPurchased)==null?void 0:l.paymentType)===we.PRODUCT?we.PRODUCT:we.DONATION,locationId:V.value,formId:r.formId,transactionId:F.query.transactionId||"51651414"};he.value=c.productPurchased,ft.value=c.productPurchasedList,Dt.value=c.productSummary,await er(v,i)}},Ba=()=>{r.calendar&&(be.value=_.value.map(o=>o.tag),setTimeout(()=>{$n(r.calendar.id,be.value,e.formFieldsValue,e.phoneCountryIncluded,j.value).then(o=>{if(o){e.formFieldsValue=o.formFieldsValue,e.phoneCountryIncluded=o.phoneCountryIncluded,j.value=o.formattedCountry;for(let n in e.phoneCountryIncluded)e.phoneCountryIncluded[n]&&zt({tag:n})}else console.warn("session data not found! skipping contact fill")}).catch(o=>{console.error("Failed at loadDataFromSessionStorage",o)})},_o()?1005:100))},ja=async o=>{var n,l;o.type==="error"&&(o!=null&&o.message)&&(s("disableBackOnSubmit",{disable:!1}),ce.value=!1),Mt.appointmentBookingLogs((l=(n=r.calendarServiceHelper)==null?void 0:n.state)==null?void 0:l.traceId,{message:"payment_callback",component:"FormComponent"}),s("onProcessCalendarPayment",o)};return Ya(()=>{ot.$off("submitCalendarForm",xt)}),(o,n)=>{var Ae,Ve,De,Le,ze,Ue;const l=rn,c=ki,i=an,v=Ti,O=Oi,D=Ai,L=Vi,m=nn,Y=Di,B=ln,S=Li,z=sn,ne=zi,Q=Ui,Z=Ni,U=xi,A=Ri,X=$i,re=Bi,ae=un,le=ji,H=Mi,b=qi,I=Wi,ee=Hi,me=Gi,te=cn,J=Ki,Ce=Ji,se=Qi,Ie=Yi,pe=Zi,Fe=Xi;return h(),rt("div",es,[yo(l,{type:"text/css",children:a(Jo)},null,8,["children"]),at("section",{id:"form-builder",class:Ct(["hl_form-builder--main",a(e).form.fullScreenMode?"hl_form-builder--main-full":""]),style:nt(la())},[a(to).trim().length>0?(h(),rt("div",ts,[at("div",{class:"max-w-full ghl-banner w-full",style:nt({maxWidth:a(io)+"px"})},[yo(c,{url:a(to),width:a(io),alt:"banner"},null,8,["url","width"])],4)])):Ee("",!0),at("div",{style:nt({maxWidth:a(io)+"px",marginBottom:a(e).form.fullScreenMode?"0 !important":""}),class:"ghl-form-wrap"},[a(Ke)?Ee("",!0):(h(),rt("div",{key:0,id:"_builder-form",style:nt(a(Yr)()),name:"builder-form",class:Ct(["form-builder--wrap",a(e).form.fullScreenMode?"form-builder--wrap-full":""])},[at("div",{class:Ct([a(it)?"builder-inline":"flex-col",a(q)?"":"extra-top-padding","fields-container row"])},[(h(!0),rt(Za,null,Xa(a(_),(u,C)=>{var Ne,xe,Re,d,w,g,ie,G,oe,Se,$e,Be,je,Me,qe,ye,_t,gt,ht,bt;return h(),rt("div",{key:C,id:"el_"+u.tag+"_"+C,style:nt(ua(u)),class:Ct([ia(u,C),a(it)?"menu-field-wrap":"",{calendar_notes:u.tag==="calendar_notes"},{location_picker:u.tag==="locationConfiguration"},{"payment-block":u.type==="payment"}])},[at("div",{class:Ct([C%2==0?"f-even":"f-odd","form-field-container"])},[u.type==="text"?(h(),E(i,{key:0,kind:"form",item:a(M)(u),"form-label-visible":a(q),"phone-country-included":a(e).phoneCountryIncluded,"phone-country-code":a(e).phoneCountryCode,"location-country":a(Go),"form-fields-value":a(e).formFieldsValue,"formatted-phone":a(e).formattedPhone,"phone-country-derived":a(kt),errors:a(e).errors,"layout-type":a(e).form.layout,"check-full-width-position":Ut(C),"font-size":(Re=(xe=(Ne=a(e))==null?void 0:Ne.form)==null?void 0:xe.fieldStyle)==null?void 0:Re.placeholderFontSize,locationId:(d=r==null?void 0:r.formData)==null?void 0:d.locationId,"medium-id":t.formId,onVerifyPhone:$o,onUpdatePhoneCountryDerived:Qo,onCustomFieldPhoneNumberUpdate:zt,onAddOrUpdateError:W,ref_for:!0,ref:y=>{a(T)[C]=y}},null,8,["item","form-label-visible","phone-country-included","phone-country-code","location-country","form-fields-value","formatted-phone","phone-country-derived","errors","layout-type","check-full-width-position","font-size","locationId","medium-id"])):u.type==="phone"?(h(),E(v,{key:1,kind:"form",item:a(M)(u),"form-label-visible":a(q),"phone-country-included":a(e).phoneCountryIncluded,"phone-country-code":a(e).phoneCountryCode,"location-country":a(Go),"form-fields-value":a(e).formFieldsValue,"phone-country-derived":a(kt),"formatted-phone":a(e).formattedPhone,errors:a(e).errors,"layout-type":a(e).form.layout,"check-full-width-position":Ut(C),"font-size":(ie=(g=(w=a(e))==null?void 0:w.form)==null?void 0:g.fieldStyle)==null?void 0:ie.placeholderFontSize,locationId:(G=r==null?void 0:r.formData)==null?void 0:G.locationId,"medium-id":t.formId,onVerifyPhone:$o,onAddOrUpdateError:W,onUpdatePhoneCountryDerived:Qo,onCustomFieldPhoneNumberUpdate:zt,ref_for:!0,ref:y=>{a(T)[C]=y}},null,8,["item","form-label-visible","phone-country-included","phone-country-code","location-country","form-fields-value","phone-country-derived","formatted-phone","errors","layout-type","check-full-width-position","font-size","locationId","medium-id"])):u.type==="number"||u.type==="numerical"||u.dataType==="SCORE"?(h(),E(O,{key:2,kind:"form",item:a(M)(u),"form-label-visible":a(q),"form-fields-value":a(e).formFieldsValue,errors:a(e).errors,onAddOrUpdateError:W,ref_for:!0,ref:y=>{a(T)[C]=y}},null,8,["item","form-label-visible","form-fields-value","errors"])):u.type==="email"?(h(),E(D,{key:3,kind:"form",item:a(M)(u),"form-label-visible":a(q),"form-fields-value":a(e).formFieldsValue,errors:a(e).errors,"layout-type":a(e).form.layout,"check-full-width-position":Ut(C),"font-size":($e=(Se=(oe=a(e))==null?void 0:oe.form)==null?void 0:Se.fieldStyle)==null?void 0:$e.placeholderFontSize,onAddOrUpdateError:W,onVerifyEmail:na,locationId:(Be=r==null?void 0:r.formData)==null?void 0:Be.locationId,ref_for:!0,ref:y=>{a(T)[C]=y}},null,8,["item","form-label-visible","form-fields-value","errors","layout-type","check-full-width-position","font-size","locationId"])):Ee("",!0),u.type==="h1"?(h(),E(L,{key:4,item:a(M)(u)},null,8,["item"])):u.type==="textbox_list"?(h(),E(m,{key:5,kind:"form",item:a(M)(u),"form-label-visible":a(q),"form-fields-value":a(e).formFieldsValue,"local-tag-id":a(Te),errors:a(e).errors,onAddOrUpdateError:W,ref_for:!0,ref:y=>{a(T)[C]=y}},null,8,["item","form-label-visible","form-fields-value","local-tag-id","errors"])):(u==null?void 0:u.type)==="location_picker"&&a(yt)&&(((je=a(yt))==null?void 0:je.length)>1||((Me=a(yt))==null?void 0:Me.length)===1&&((ye=(qe=a(yt))==null?void 0:qe[0])==null?void 0:ye.kind)==="booker")&&t.isNewCalendarWidgetEnabled?(h(),E(Y,{key:6,ref_for:!0,ref:y=>{a(T)[C]=y},kind:"form",data:{locationConfiguration:a(yt)},"form-fields-value":a(e).formFieldsValue,errors:a(e).errors,item:a(M)(u),onUpdateSelectedLocation:va,onAddOrUpdateError:W,"default-value":a(Xe),"default-booker-location":a(et)},null,8,["data","form-fields-value","errors","item","default-value","default-booker-location"])):u.type==="textarea"||u.type=="large_text"?(h(),E(B,{key:7,kind:"form",item:a(M)(u),"form-label-visible":a(q),"form-fields-value":a(e).formFieldsValue,errors:a(e).errors,onAddOrUpdateError:W,ref_for:!0,ref:y=>{a(T)[C]=y}},null,8,["item","form-label-visible","form-fields-value","errors"])):u.type==="img"&&"url"in u?(h(),E(S,{key:8,kind:"form",item:a(M)(u),ref_for:!0,ref:y=>{a(T)[C]=y}},null,8,["item"])):u.type==="html"&&a(eo)&&a(ko)?(h(),E(z,{key:9,item:a(M)(u),localTagId:a(Te)+C,ref_for:!0,ref:y=>{a(T)[C]=y}},null,8,["item","localTagId"])):u.type==="captcha"?(h(),E(ne,{key:10,kind:"form",item:a(M)(u),"form-label-visible":a(q),"captcha-input-value":a(At),"local-tag-id":a(Te),"validation-error":a(e).validationError,onUpdateValidationError:ba,onUpdateIsCaptchaVerified:wa,onUpdateCaptchaToken:ka,ref_for:!0,ref:y=>{a(T)[C]=y}},null,8,["item","form-label-visible","captcha-input-value","local-tag-id","validation-error"])):u.type==="monetory"?(h(),E(Q,{key:11,kind:"form",item:a(M)(u),"form-label-visible":a(q),"form-fields-value":a(e).formFieldsValue,"locale-currency":a(pa),errors:a(e).errors,onAddOrUpdateError:W,onUpdateFormFieldsValue:vt,ref_for:!0,ref:y=>{a(T)[C]=y}},null,8,["item","form-label-visible","form-fields-value","locale-currency","errors"])):u.type==="checkbox"?(h(),E(Z,{key:12,kind:"form",item:a(M)(u),"form-label-visible":a(q),"form-fields-value":a(e).formFieldsValue,layout:a(e).form.layout,"local-tag-id":a(Te),errors:a(e).errors,onAddOrUpdateError:W,onUpdateFormFieldsValue:vt,ref_for:!0,ref:y=>{a(T)[C]=y}},null,8,["item","form-label-visible","form-fields-value","layout","local-tag-id","errors"])):u.type==="terms_and_conditions"?(h(),E(U,{key:13,kind:"form",item:a(M)(u),"form-label-visible":a(q),labelFontFamily:a(e).fieldStyle.labelFontFamily,"form-fields-value":a(e).formFieldsValue,"local-tag-id":a(Te),errors:a(e).errors,onAddOrUpdateError:W,onUpdateFormFieldsValue:vt,ref_for:!0,ref:y=>{a(T)[C]=y}},null,8,["item","form-label-visible","labelFontFamily","form-fields-value","local-tag-id","errors"])):u.type==="radio"&&u.picklistOptions?(h(),E(A,{key:14,kind:"form",item:a(M)(u),"form-label-visible":a(q),"form-fields-value":a(e).formFieldsValue,"local-tag-id":a(Te),errors:a(e).errors,layout:a(e).form.layout,onAddOrUpdateError:W,onResetFieldsValue:La,onSetRadioValue:za,ref_for:!0,ref:y=>{a(T)[C]=y}},null,8,["item","form-label-visible","form-fields-value","local-tag-id","errors","layout"])):u.type==="radio"&&u.picklistOptionsImage?(h(),E(X,{key:15,kind:"form",item:a(M)(u),"form-label-visible":a(q),"form-fields-value":a(e).formFieldsValue,layout:a(e).form.layout,"local-tag-id":a(Te),errors:a(e).errors,onAddOrUpdateError:W,ref_for:!0,ref:y=>{a(T)[C]=y}},null,8,["item","form-label-visible","form-fields-value","layout","local-tag-id","errors"])):u.type==="select"&&u.tag=="country"?(h(),E(re,{key:16,kind:"form",item:a(M)(u),"form-label-visible":a(q),"formatted-country":a(j),countries:a(ya),errors:a(e).errors,onUpdateFormattedCountry:Ea,onAddOrUpdateError:W,ref_for:!0,ref:y=>{a(T)[C]=y}},null,8,["item","form-label-visible","formatted-country","countries","errors"])):u.type==="single_options"||u.type==="multiple_options"?(h(),E(ae,{key:17,kind:"form",item:a(M)(u),"form-label-visible":a(q),"form-fields-value":a(e).formFieldsValue,errors:a(e).errors,onAddOrUpdateError:W,ref_for:!0,ref:y=>{a(T)[C]=y}},null,8,["item","form-label-visible","form-fields-value","errors"])):u.type==="date"?(h(),E(le,{key:18,kind:"form",item:a(M)(u),"form-label-visible":a(q),"form-fields-value":a(e).formFieldsValue,errors:a(e).errors,ref_for:!0,ref:y=>{a(T)[C]=y},onDateSelected:Ta,onAddOrUpdateError:W},null,8,["item","form-label-visible","form-fields-value","errors"])):u.type==="payment"&&a(Wo)?(h(),E(H,{key:19,calendar:t.calendar,payment:a(Oe),stripe:a(Ot),card:a(Yt),"card-error-msg":a(ke),onUpdateStripe:Ca,onUpdateCard:Ia,onUpdateCardErrorMsg:Sa,ref_for:!0,ref:y=>{a(T)[C]=y}},null,8,["calendar","payment","stripe","card","card-error-msg"])):u.type==="payment"&&a(Ho)&&a(eo)?(h(),E(b,{key:20,kind:"form",calendar:t.calendar,payment:a(Oe),setAuthorizeNetNewCardDetails:Fa,authorizeNetCardNumberError:a(Vo),authorizeNetCardExpiryError:a(Do),authorizeNetCardCVCError:a(Lo),setAuthorizeNetCardNumberError:a(zo),setAuthorizeNetExpiryError:a(Uo),setAuthorizeNetCVCError:a(No),authorizeNetErrorResponse:a(ea)},null,8,["calendar","payment","authorizeNetCardNumberError","authorizeNetCardExpiryError","authorizeNetCardCVCError","setAuthorizeNetCardNumberError","setAuthorizeNetExpiryError","setAuthorizeNetCVCError","authorizeNetErrorResponse"])):!t.calendar&&u.type==="payment"&&(((gt=(_t=a(e).form)==null?void 0:_t.payment)==null?void 0:gt.paymentType)==="product"&&a(Bo)&&a(Lt).length>0||((bt=(ht=a(e).form)==null?void 0:ht.payment)==null?void 0:bt.paymentType)!=="product")?(h(),E(I,{key:21,kind:"form",item:a(M)(u),payment:a(e).form.payment,products:a(Lt),style:nt(a(e).form.fieldStyle),"form-label-visible":a(q),locationId:a(V),"form-id":t.formId,isPaymentInProcessing:a(ce),"form-name":t.formData.name,errors:a(e).errors,onOnPaymentCallback:$a,onAddOrUpdateError:W,onPaymentAmount:ra,onProductOrder:aa,onOnOrderApiFail:n[0]||(n[0]=()=>en(ce)?ce.value=!1:ce=!1),onProductSelected:_a,onCouponCode:ga,ref_for:!0,ref:y=>{a(T)[C]=y,To.value=y}},null,8,["item","payment","products","style","form-label-visible","locationId","form-id","isPaymentInProcessing","form-name","errors"])):u.type==="file_upload"?(h(),E(ee,{key:22,kind:"form",item:a(M)(u),"form-fields-value":a(e).formFieldsValue,"form-label-visible":a(q),errors:a(e).errors,onUpdateFormFieldsValue:vt,onAddOrUpdateError:W,ref_for:!0,ref:y=>{a(T)[C]=y}},null,8,["item","form-fields-value","form-label-visible","errors"])):u.type==="signature"?(h(),E(me,{key:23,kind:"form",item:a(M)(u),"form-fields-value":a(e).formFieldsValue,"form-label-visible":a(q),ref_for:!0,ref:y=>{a(T)[C]=y},errors:a(e).errors,onUpdateFormFieldsValue:vt,onAddOrUpdateError:W},null,8,["item","form-fields-value","form-label-visible","errors"])):u.type==="submit"&&!a(Mo)?(h(),E(te,{key:24,item:a(M)(u),layout:a(e).form.layout,"form-label-visible":a(e).form.formLabelVisible,"button-style":a(e).buttonStyle,calendar:t.calendar,"form-submit-disable":a(ce),onClick:xt,ref_for:!0,ref:y=>{a(T)[C]=y},errors:a(e).errors},null,8,["item","layout","form-label-visible","button-style","calendar","form-submit-disable","errors"])):Ee("",!0)],2)],14,os)}),128)),a(Mo)?(h(),rt("div",rs,[t.isNewCalendarWidgetEnabled?(h(),E(J,{key:0,guests:t.guests,"guest-count-detail":t.guestCountDetail,"collect-guest-count":a(qo),"seats-per-slot-data":r.seatsPerSlotData,"form-fields-value":a(e).formFieldsValue,ref:u=>co(u),onAddOrUpdateError:W},null,8,["guests","guest-count-detail","collect-guest-count","seats-per-slot-data","form-fields-value"])):(h(),E(Ce,{key:1,guests:t.guests,"guest-count-detail":t.guestCountDetail,"collect-guest-count":a(qo),"seats-per-slot-data":r.seatsPerSlotData,"form-fields-value":a(e).formFieldsValue,ref:u=>co(u),onAddOrUpdateError:W},null,8,["guests","guest-count-detail","collect-guest-count","seats-per-slot-data","form-fields-value"])),a(jo)?(h(),E(te,{key:2,item:a(jo),"button-style":a(e).buttonStyle,calendar:t.calendar,"form-submit-disable":a(ce),onClick:xt,ref:u=>co(u),errors:a(e).errors,class:"menu-field-wrap col-sm-12 col-12 calendar_notes mt-20"},null,8,["item","button-style","calendar","form-submit-disable","errors"])):Ee("",!0)])):Ee("",!0)],2),t.formData!=null&&a(Et)?(h(),E(se,{key:0,company:a(e).company},null,8,["company"])):Ee("",!0)],6)),a(Pe)&&a(Pe).action==="order"?(h(),E(Ie,{key:1,id:"order-confirmation",payload:a(Pe)},null,8,["payload"])):Ee("",!0),a(Pe)&&a(Pe).action==="submit-form"?(h(),E(pe,{key:2,id:"_builder-form",payload:a(Pe)},null,8,["payload"])):Ee("",!0),!((Ve=(Ae=t.calendarServiceHelper)==null?void 0:Ae.state)!=null&&Ve.isFormFirst)&&!((Le=(De=t.calendarServiceHelper)==null?void 0:De.state)!=null&&Le.isCustomPaymentProvider)&&((Ue=(ze=t.calendarServiceHelper)==null?void 0:ze.state)!=null&&Ue.isPaymentEnabled)?(h(),E(Fe,{key:3,ref:t.calendarServiceHelper.newCardPaymentElementRef,state:t.calendarServiceHelper.state,showSessionExpire:!1,onOnPaymentCallback:ja},null,8,["state"])):Ee("",!0)],4)],6),at("div",as,[yo(Nn,{loading:a(pt),color:"#188bf6",size:"30px"},null,8,["loading"])])],512)}}});export{we as F,ks as _,Es as a,Ps as c,ws as g};


}
/*
     FILE ARCHIVED ON 13:10:40 Sep 21, 2024 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 02:15:58 Jul 17, 2025.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
*/
/*
playback timings (ms):
  captures_list: 0.701
  exclusion.robots: 0.029
  exclusion.robots.policy: 0.019
  esindex: 0.012
  cdx.remote: 62.141
  LoadShardBlock: 65.982 (3)
  PetaboxLoader3.datanode: 125.792 (5)
  load_resource: 289.762 (2)
  PetaboxLoader3.resolve: 165.075 (2)
*/