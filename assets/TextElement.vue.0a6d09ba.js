var _____WB$wombat$assign$function_____ = function(name) {return (self._wb_wombat && self._wb_wombat.local_init && self._wb_wombat.local_init(name)) || self[name]; };
if (!self.__WB_pmw) { self.__WB_pmw = function(obj) { this.__WB_source = obj; return this; } }
{
  let window = _____WB$wombat$assign$function_____("window");
  let self = _____WB$wombat$assign$function_____("self");
  let document = _____WB$wombat$assign$function_____("document");
  let location = _____WB$wombat$assign$function_____("location");
  let top = _____WB$wombat$assign$function_____("top");
  let parent = _____WB$wombat$assign$function_____("parent");
  let frames = _____WB$wombat$assign$function_____("frames");
  let opener = _____WB$wombat$assign$function_____("opener");

import{d as J,I as X,c as v,r as h,o as _,J as ee,B as te,w as P,f as o,a as l,b as d,e as r,n as c,i as u,Q as y,t as g,a9 as M,z as F,m as ie,v as ne,T as oe,R,ad as ae,h as le,p as re,u as de,P as ue}from"./entry.285a7035.js";import{v as B,i as se,a as me}from"./HtmlInput.vue.53d3c79f.js";import{F as ce}from"./FunnelServices.dade5b8d.js";import{l as he,i as ye}from"./IntlTel.486980e8.js";import{V as fe,o as ve}from"./optimize_script.004a85b2.js";import{S as ge}from"./ShortLabel.7af1ff63.js";import{C as be}from"./check-circle.f31c72f2.js";import{ar as L,au as D}from"./constants.7efca516.js";const Ce=["id"],ke=["innerHTML"],pe={key:1},Ve={key:0},Se={key:2},Pe=["value","name","placeholder","id","data-q","data-required"],Fe=["onClick"],we={key:0,class:"verified-text"},Ie=["src"],Te={key:1,class:"verification-container"},Le=r("br",null,null,-1),qe=["onClick"],Oe=["onClick"],Ee=["placeholder","name","id","data-q","data-required"],Ne=["type","placeholder","name","id","data-q","data-required"],xe={key:5,id:"error-container",class:"error"},Ue={key:6,id:"error-container",class:"error"},We=J({__name:"TextElement",props:{kind:{type:String},item:{type:Object},formLabelVisible:{type:Boolean},phoneCountryIncluded:{type:Object},phoneCountryCode:{type:Object},formattedPhone:{type:Object},locationCountry:{type:String},formFieldsValue:{type:Object},phoneFields:{type:Object},phoneCountryDerived:{type:String},layoutType:{type:[Number,Boolean]},checkFullWidthPosition:{type:Boolean},fontSize:{type:[Number,String]},locationId:{type:String},mediumId:{type:String},errors:{type:Object,default:()=>({})}},emits:["addOrUpdateError","isSlideMovable","customFieldPhoneNumberUpdate","updatePhoneCountryDerived","verifyPhone"],setup(t,{expose:$,emit:b}){const e=t,{t:K}=X(),q=ue(),w=v(()=>{var n;return((n=e.item)==null?void 0:n.enableCountryPicker)!==!1}),O=h(),C=h(),j=n=>{e.phoneCountryIncluded[e.item.tag]=n.target.value},z=v(()=>e.kind=="form"),f=v(()=>e.kind=="survey"),E=v(()=>e.errors[e.item.tag]),W=()=>{var n;((n=e.item)==null?void 0:n.tag)==="phone"&&ve(()=>{de(he(w,{intlTelFunc:()=>{w.value&&ye(x)}}))})};_(()=>{var n;((n=e.item)==null?void 0:n.tag)==="phone"&&ce.getGeoLocation().then(i=>{const a=i.country!=="ZZ"?i.country:e.locationCountry;e.phoneCountryCode[e.item.tag]=a,Q(a),e.phoneCountryIncluded[e.item.tag]&&e.phoneCountryCode[e.item.tag]&&T({tag:e.item.tag})}).catch(i=>{console.error("Error while fetching headers: ",i)})});const T=n=>{b("customFieldPhoneNumberUpdate",n)},N=n=>{f.value&&b("isSlideMovable",n)},x=()=>{var i;const n=O.value;n&&(C.value=(i=window==null?void 0:window.intlTelInput)==null?void 0:i.call(window,n,{preferredCountries:["us","gb","ca","au"],initialCountry:e.locationCountry.toLowerCase()||"us"}),n.addEventListener("countrychange",()=>{if(!C.value)return;const a=C.value.getNumber(),m=C.value.getSelectedCountryData().iso2;e.phoneCountryIncluded[n.name]=a,e.phoneCountryCode[n.name]=m?m.toUpperCase():"US",T({tag:n.name})}))},Q=n=>{b("updatePhoneCountryDerived",n)},H=n=>{var a,m;if(f.value)return;const i=e.formFieldsValue[e.item.tag];if(e.item.required&&se(i))s(e.item.tag,((a=e.item)==null?void 0:a.error)??` ${e.item.label} is required`);else if(e.item.tag==="phone")if(!B(i,e.phoneCountryCode[e.item.tag]?e.phoneCountryCode[e.item.tag]:e.locationCountry))s(e.item.tag,K("invalid_phone_no"));else if(e.item.enableValidatePhone&&!((m=e.item)!=null&&m.hidden)&&!I.value&&i){s(e.item.tag,"Phone is not verified!");return}else s(e.item.tag,null);else e.item.tag==="website"&&!me(i)?s(e.item.tag,"Invalid url"):s(e.item.tag,null)},k=h(""),p=h(null),U=h(null),V=h(!1),I=h(!1),Y=v(()=>e.formFieldsValue[e.item.tag]?e.item.enableValidatePhone&&B(e.formFieldsValue[e.item.tag],e.phoneCountryCode[e.item.tag]?e.phoneCountryCode[e.item.tag]:e.locationCountry):!1),G=()=>{var a;V.value=!0;const n=(a=window.libphonenumber.parsePhoneNumberFromString(e.formFieldsValue[e.item.tag],e.phoneCountryCode[e.item.tag]?e.phoneCountryCode[e.item.tag]:e.locationCountry))==null?void 0:a.number,i={locationId:e.locationId,phone:n,type:f.value?"survey":"form",mediumId:e.mediumId};$fetch(`${q.public.FORMS_SERVICE_URL}/forms/verify-phone`,{method:"POST",body:i}).then(m=>{U.value=m.token}).catch(m=>{console.error(m)})},Z=()=>{const n={locationId:e.locationId,phone:e.formFieldsValue[e.item.tag],type:f.value?"survey":"form",token:U.value,otp:k.value,mediumId:e.mediumId};$fetch(`${q.public.FORMS_SERVICE_URL}/forms/verify-phone`,{method:"POST",body:n}).then(i=>{i!=null&&i.ok&&(s(e.item.tag,null),p.value=null,I.value=!0,V.value=!1,b("verifyPhone","Yes"))}).catch(i=>{s(e.item.tag,"The security code is not correct or has been used. Try with a new code."),f.value&&(p.value="The security code is not correct or has been used. Try with a new code."),console.error(i)})},A=()=>{k.value="",V.value=!1,s(e.item.tag,null),p.value=null},s=(n,i)=>{b("addOrUpdateError",{tag:n,error:i})};ee(()=>e.phoneCountryDerived,(n,i)=>{i!==n&&w.value&&x()}),te(()=>{var n;(n=C.value)==null||n.destroy()});const S=v(()=>[L.ONE_COLUMN,L.TWO_COLUMN,L.SINGLE_LINE].includes(e.layoutType)?e.item.fieldWidthPercentage?e.item.fieldWidthPercentage<=50:!0:e.layoutType===!0&&e.checkFullWidthPosition);return $({validate:H,item:e.item}),(n,i)=>P((l(),d("div",null,[r("div",{class:c([{"d-none":t.item.hidden},"field-container"])},[r("div",{id:"form-"+t.item.tag,class:c(["form-builder--item",{"form-builder--item-input":t.kind=="survey"}])},[o(f)&&t.item.description!==void 0?(l(),d("label",{key:0,innerHTML:t.item.description,class:"item-description"},null,8,ke)):u("",!0),t.formLabelVisible?(l(),d("label",pe,[y(g(t.item.label||"Â ")+" ",1),t.item.required?(l(),d("span",Ve,"*")):u("",!0)])):u("",!0),t.item.tag=="phone"?(l(),d("div",Se,[P(r("div",{class:c(["phone-input",o(S)?"block":"flex"])},[t.item.tag=="phone"?(l(),d("input",{key:0,onInput:j,value:t.formattedPhone[t.item.tag],type:"tel",name:t.item.tag,placeholder:!t.formLabelVisible&&t.item.required?t.item.placeholder+"*":t.item.placeholder,autocomplete:"off",class:c(o(w)?"countryphone":"form-control"),ref:a=>O.value=a,id:t.item.tag,"data-q":t.item.hiddenFieldQueryKey,"data-required":t.item.required,onKeyup:i[0]||(i[0]=a=>T(t.item)),onKeydown:i[1]||(i[1]=M(F(a=>N({}),["prevent"]),["enter"]))},null,42,Pe)):u("",!0),o(Y)?(l(),d("button",{key:1,onClick:F(G,["prevent"]),class:c(["verify-phone-btn",o(S)?"mt-3":""]),style:ie({fontSize:`${t.fontSize}px`})}," Verify Phone ",14,Fe)):u("",!0)],2),[[ne,!o(V)&&!o(I)]]),o(I)?(l(),d("div",we,[r("img",{src:o(be),height:"18",width:"18",alt:"verified",class:"mr-3"},null,8,Ie),r("span",null,[y(" Your phone "),r("b",null,g(t.formFieldsValue[t.item.tag]),1),y(" has been successfully verified.")])])):u("",!0),o(V)?(l(),d("div",Te,[r("p",null,[y(" Your verification code has been sent to "),r("b",null,g(t.formFieldsValue[t.item.tag]),1),y(". "),Le,y("Kindly review your sms and insert the code below to complete the verification process. ")]),r("div",{class:c(["phone-input mt-3",o(S)||o(D)()?"block":"flex"])},[P(r("input",{type:"text","onUpdate:modelValue":i[2]||(i[2]=a=>oe(k)?k.value=a:null),maxlength:"6",class:"otp",placeholder:"Enter OTP"},null,512),[[R,o(k)]]),r("div",{class:c(o(S)||o(D)()?"mt-3 block":"flex")},[r("button",{onClick:F(Z,["prevent"]),class:c(["confirm-btn",o(S)?"mb-3":""])}," Confirm Code ",10,qe),r("button",{onClick:F(A,["prevent"]),class:"reset-btn"}," Edit Phone ",8,Oe)],2)],2)])):u("",!0)])):o(z)&&t.item.tag=="website"?P((l(),d("input",{key:3,"onUpdate:modelValue":i[3]||(i[3]=a=>t.formFieldsValue[t.item.tag]=a),placeholder:!t.formLabelVisible&&t.item.required?t.item.placeholder+"*":t.item.placeholder,name:t.item.tag,type:"text",class:"form-control",id:t.item.tag,"data-q":t.item.hiddenFieldQueryKey,"data-required":t.item.required},null,8,Ee)),[[R,t.formFieldsValue[t.item.tag]]]):P((l(),d("input",{key:4,"onUpdate:modelValue":i[4]||(i[4]=a=>t.formFieldsValue[t.item.tag]=a),type:t.item.type,placeholder:!t.formLabelVisible&&t.item.required?t.item.placeholder+"*":t.item.placeholder,name:t.item.tag,onKeydown:i[5]||(i[5]=M(F(a=>N({}),["prevent"]),["enter"])),class:"form-control",id:t.item.tag,"data-q":t.item.hiddenFieldQueryKey,"data-required":t.item.required},null,40,Ne)),[[ae,t.formFieldsValue[t.item.tag]]]),o(E)?(l(),d("div",xe,g(o(E)),1)):u("",!0),o(p)&&t.item.tag=="phone"?(l(),d("div",Ue,g(o(p)),1)):u("",!0),t.item.shortLabel?(l(),le(ge,{key:7},{default:re(()=>[y(g(t.item.shortLabel),1)]),_:1})):u("",!0)],10,Ce)],2)])),[[o(fe),W]])}});export{We as _};


}
/*
     FILE ARCHIVED ON 13:04:47 Sep 21, 2024 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 02:16:01 Jul 17, 2025.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
*/
/*
playback timings (ms):
  captures_list: 0.502
  exclusion.robots: 0.023
  exclusion.robots.policy: 0.014
  esindex: 0.01
  cdx.remote: 14.457
  LoadShardBlock: 136.51 (3)
  PetaboxLoader3.datanode: 91.615 (4)
  PetaboxLoader3.resolve: 127.503 (2)
  load_resource: 137.711
*/