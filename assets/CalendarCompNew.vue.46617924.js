var _____WB$wombat$assign$function_____ = function(name) {return (self._wb_wombat && self._wb_wombat.local_init && self._wb_wombat.local_init(name)) || self[name]; };
if (!self.__WB_pmw) { self.__WB_pmw = function(obj) { this.__WB_source = obj; return this; } }
{
  let window = _____WB$wombat$assign$function_____("window");
  let self = _____WB$wombat$assign$function_____("self");
  let document = _____WB$wombat$assign$function_____("document");
  let location = _____WB$wombat$assign$function_____("location");
  let top = _____WB$wombat$assign$function_____("top");
  let parent = _____WB$wombat$assign$function_____("parent");
  let frames = _____WB$wombat$assign$function_____("frames");
  let opener = _____WB$wombat$assign$function_____("opener");

import{d as G,I as H,u as M,M as K,c as h,E as Q,G as J,H as p,o as V,a as b,b as X,f as c,h as q,P as Z}from"./entry.285a7035.js";import{E as Y,o as W,n as ee}from"./constants.7efca516.js";import{_ as ae}from"./CalendarComponent.f7042f22.js";import{_ as te}from"./CalendarComponentv3.vue.ce7575a8.js";import{W as x}from"./HLConst.8f085cc8.js";import{i as R}from"./utils.ad5f9796.js";import{s as re}from"./index.48cf4353.js";import{i as se,a as O,m as ne,j as U,k as C,s as j}from"./calendar_helper.3c24cf7d.js";import{s as oe}from"./am_helper.8cd06526.js";const fe=G({__name:"CalendarCompNew",props:["shouldUseSlug","calendarData","calendarElementClass","redirect","funnelPreview","oneTimeSlug"],emits:["on-submit"],async setup(v,{emit:L}){var F;let D,_;const y=v;H(),M({script:[{src:x.IFRAME_RESIZE,async:!0,type:"text/javascript"},{src:x.IFRAME_PIXEL,async:!0,type:"text/javascript"}]});const l=K({urlParams:void 0,url:void 0,referrer:void 0,directWidget:!0,stickyContactData:void 0,stickyContactFingerprint:void 0}),E=h(()=>{var s,r;if(!((s=o.value)!=null&&s.calendarData))throw p({statusCode:404,statusMessage:"Page Not Found"});const e={services:[],calendarProvider:{},eventId:void 0,calendarEvent:void 0},n=Object.keys(o.value.calendarData),a=o.value.calendarData[n[0]];if(e.services.push(a.calendar),(a==null?void 0:a.widget_type)==="classic")return a;if(e.calendarProvider=((r=a.provider)==null?void 0:r._data)||{},e.calendarProvider.startDayOfWeek=a.calendar.startDayOfWeek,e.calendarProvider.country=a.calendar.country,e.calendarProvider.timezone=a.calendar.timezone,e.calendarProvider.use24hFormat=a.calendar.use24hFormat,e.calendarProvider.language=a.calendar.language,e.calendarProvider.disableContactTimezone=a.calendar.disableContactTimezone,t.query.event_id&&(e.eventId=t.query.event_id,e.calendarEvent=a.calendar.calendarEvent,!(e!=null&&e.calendarEvent)))throw p({statusCode:404,statusMessage:"Failed to get event details"});return e}),A=()=>{var r;let e;const n=(r=E.value)==null?void 0:r.services[0];let a=n==null?void 0:n.widget_config;if(a&&(e={...a==null?void 0:a.primarySettings,default:a==null?void 0:a.default}),Object.keys(t.query).length!==0){const i=O(t.query);i&&(e=i)}const s=(e==null?void 0:e.default)===!0||(e==null?void 0:e.default)==="true";if(e&&!s){const i=ne(e==null?void 0:e.backgroundColor);let u=U(i?g.value?C.DARK:C.DARK_OLD:g.value?C.LIGHT:C.LIGHT_OLD);return g.value&&((e==null?void 0:e.primaryColor.length)===9&&(u.lightPrimaryColor=(e==null?void 0:e.primaryColor.substring(0,(e==null?void 0:e.primaryColor.length)-2))+"12"),(e==null?void 0:e.backgroundColor.length)===7&&(u.blurColor=(e==null?void 0:e.backgroundColor)+"b3"),(e==null?void 0:e.backgroundColor.length)===9&&(u.blurColor=(e==null?void 0:e.backgroundColor.substring(0,(e==null?void 0:e.backgroundColor.length)-2))+"b3")),u.primaryColor=e==null?void 0:e.primaryColor,u.backgroundColor=e==null?void 0:e.backgroundColor,j(u,void 0,g.value,!1)}else{let i=U(g.value?C.DEFAULT:C.DEFAULT_OLD);return j(i,void 0,g.value,!1)}},$=h(()=>{const e=A();return`:root { ${Object.entries(e).map(([n,a])=>`${n}: ${a} !important;`).join("")} }`}),t=Q(),N=t.query.notrack,P=()=>{L("on-submit")},B=Z(),{data:o}=([D,_]=J(async()=>ee(y.calendarElementClass||"calendarData",async e=>{var n;if(y.calendarData)return{calendarData:y.calendarData,notrack:!1,lang:"en"};try{let a=t.params.slug||t.params.oneTimeSlug;if(a&&a[0]==="/"&&(a=a.substring(1)),!a&&!t.params.id&&!t.query.calendar)throw p({statusCode:404,statusMessage:"Calendar Id not found"});let s=B.public.newBaseURL,r,i=`/appointment/widget?${y.shouldUseSlug?"slug":"calendarId"}=${y.shouldUseSlug?a:t.params.id||t.query.calendar}&event_id=${t.query.event_id||""}`;y.oneTimeSlug&&(i=`/appointment/widget?oneTimeSlug=${t.params.oneTimeSlug}`);try{r=await $fetch(s+i)}catch(m){throw(m==null?void 0:m.status)===404&&((n=m==null?void 0:m.data)==null?void 0:n.oneTimeSlug)==="expired"?p({statusCode:404,statusMessage:"Slug Expired",fatal:!0,message:"Uh-oh! The link is no longer active. Please reach out to the event owner for a new link"}):p({statusCode:404,statusMessage:"Page Not Found"})}let u,w,f;if(t.query.lang)u=t.query.lang;else if(r&&Object.keys(r).length>0){const m=r[Object.keys(r)[0]],d=m==null?void 0:m.calendar;d&&(d!=null&&d.language&&(u=d==null?void 0:d.language),w=d==null?void 0:d.calendarEvent,f=d)}const z=se({start_time:w==null?void 0:w.start_time,selected_timezone:f==null?void 0:f.timezone},f==null?void 0:f.reschedule_preference);if(w&&z)throw p({statusCode:404,statusMessage:"Reschedule Link expired",fatal:!0,message:"Reschedules are not allowed at this time. Please contact us for assistance."});return{calendarData:r,notrack:t.query.notrack,lang:u}}catch(a){return{error:a}}},"$VEBQuB9jFJ")),D=await D,_(),D);if(o.value&&((F=o.value)!=null&&F.error))throw p(o.value.error);const I=h(()=>{var r;if(!((r=o.value)!=null&&r.calendarData))throw p({statusCode:404,statusMessage:"Page Not Found"});const e=Object.keys(o.value.calendarData),n=o.value.calendarData[e[0]];return O(t.query)?"default":t.query.widget_type||n.calendar.widget_type}),g=h(()=>{var a,s,r;if(!((a=o.value)!=null&&a.calendarData))throw p({statusCode:404,statusMessage:"Page Not Found"});const e=Object.keys(o.value.calendarData),n=o.value.calendarData[e[0]];return(r=(s=n==null?void 0:n.calendar)==null?void 0:s.feature_flags)==null?void 0:r.revampedWidgetDesign});o.value&&I.value!=="classic"&&M(()=>({style:[{children:$.value,type:"text/css"}]}));const k=h(()=>{var e;if(!((e=o.value)!=null&&e.calendarData))throw p({statusCode:404,statusMessage:"Page Not Found"});return R(o.value.calendarData)?[]:Object.values(o.value.calendarData).map(n=>n.calendar)}),T=h(()=>{if(t.params.oneTimeSlug&&!R(o.value.calendarData))return Object.keys(o.value.calendarData)[0]});V(async()=>{await re();{const e=T.value||t.params.slug||t.query.calendar||t.params.id;if(e){const n=k.value.findIndex(s=>s.id===e&&e.split(",")[0]);let a;n>-1?a=k.value[n]:a=k.value[0],window.parent.postMessage(["fetch-query-params",window.name||"",a.location_id],"*"),window.parent.postMessage(["fetch-sticky-contacts",a.location_id],"*"),N||(Y()?window.onmessage=s=>{s.data[0]=="query-params"?(S(s.data[2],s.data[3]),l.urlParams=s.data[1],l.url=s.data[2],l.referrer=s.data[3]):s.data[0]=="sticky-contacts"&&(l.stickyContactData=s.data[1],l.stickyContactFingerprint=s.data[2])}:(t.query.am_id&&oe(a.location_id,a.id,t.query.am_id),S()))}}l.directWidget=!window||window.self===window.top});function S(e,n){const a=T.value||t.params.slug||t.query.id||t.params.id;if(a&&!y.funnelPreview){const s=k.value.findIndex(i=>i.id===a&&a.split(",")[0]);let r;s>-1?r=k.value[s]:r=k.value[0],W(r.location_id,"calendar",r.id,r.name,e,n),window.attribution={locationId:r.location_id,parentId:r.id,parentName:r.name,type:"calendar"}}}return(e,n)=>(b(),X("div",null,[c(I)==="classic"?(b(),q(ae,{key:0,"calendar-data":c(o).calendarData,pageUrl:c(l).url,urlParams:c(l).urlParams,baseReferrrer:c(l).referrer,stickyContactData:c(l).stickyContactData,stickyContactFingerprint:c(l).stickyContactFingerprint,calendarElementClass:v.calendarElementClass,redirect:v.redirect,"funnel-preview":v.funnelPreview,onOnSubmit:P},null,8,["calendar-data","pageUrl","urlParams","baseReferrrer","stickyContactData","stickyContactFingerprint","calendarElementClass","redirect","funnel-preview"])):(b(),q(te,{key:1,calendarData:c(E),directWidget:c(l).directWidget,pageUrl:c(l).url,urlParams:c(l).urlParams,baseReferrrer:c(l).referrer,stickyContactData:c(l).stickyContactData,stickyContactFingerprint:c(l).stickyContactFingerprint,calendarElementClass:v.calendarElementClass,redirect:v.redirect,"funnel-preview":v.funnelPreview,onOnSubmit:P},null,8,["calendarData","directWidget","pageUrl","urlParams","baseReferrrer","stickyContactData","stickyContactFingerprint","calendarElementClass","redirect","funnel-preview"]))]))}});export{fe as _};


}
/*
     FILE ARCHIVED ON 19:47:29 Sep 21, 2024 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 02:15:53 Jul 17, 2025.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
*/
/*
playback timings (ms):
  captures_list: 0.659
  exclusion.robots: 0.031
  exclusion.robots.policy: 0.019
  esindex: 0.011
  cdx.remote: 26.858
  LoadShardBlock: 284.017 (3)
  PetaboxLoader3.datanode: 253.621 (5)
  PetaboxLoader3.resolve: 686.146 (3)
  load_resource: 718.652 (2)
*/